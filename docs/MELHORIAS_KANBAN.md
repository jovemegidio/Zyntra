# MELHORIAS KANBAN VENDAS - ALUFORCE## IMPLEMENTA√á√ïES NECESS√ÅRIAS### 1. ‚úÖ Modal "Faturar Todos" - J√Å EXISTE E EST√Å PROFISSIONAL- Modal com gradient verde- Lista todos os pedidos a serem faturados- Mostra valores- Confirma√ß√£o com bot√£o verde### 2. üìã Modal "Exportar Dados" - CRIAR**Funcionalidades:**- Exportar para Excel (.xlsx) - planilha completa- Exportar para PDF (.pdf) - relat√≥rio formatado- Op√ß√µes: Pedidos do Kanban, Lista de Clientes, Cat√°logo de Produtos- Filtros opcionais por data### 3. üîç Modal "Incluir Cliente" - CONFIGURAR PESQUISAS**Tipos de Pesquisa:**- **Pesquisa At√¥mica**: Busca geral por CNPJ, CPF, Nome, Raz√£o Social, Telefone, Email- **Pesquisa por CNPJ/CPF**: Consulta √† Receita Federal (API externa)- **Pesquisa no Google**: Busca nome/endere√ßo usando Google Search- **Inser√ß√£o Manual**: Formul√°rio completo### 4. ‚úÖ Encoding - J√Å CORRIGIDO- Empresas agora aparecem "Hidr√°ulica SP" ao inv√©s de "Hidr??ulica SP"### 5. üéØ Filtros do Kanban - IMPLEMENTAR FUNCIONALIDADE**Modal "Crit√©rios de Sele√ß√£o" j√° existe, precisa:**- Conectar filtros de data com o sistema- Ao selecionar vendedor + datas, filtrar pedidos automaticamente- Bot√£o "Atualizar" deve recarregar kanban com filtros aplicados- Salvar estado dos filtros em sessionStorage**Filtros dispon√≠veis:**- Data de Inclus√£o (Hoje, Ontem, √öltimos 7/15/30/90 dias)- Data de Previs√£o (Pr√≥ximos/√öltimos N dias)- Data de Faturamento (√öltimos 30/60/90 dias, 1 ano)- Vendedor espec√≠fico- Projeto espec√≠fico- Exibir: Cancelados, Denegados, Encerrados (toggles)### 6. üîí Coluna "Faturado" - TORNAR FIXA- N√£o permitir mover a coluna Faturado- N√£o permitir excluir a coluna Faturado- Manter possibilidade de arrastar para outras colunas### 7. üìù Nomenclatura Din√¢mica nos Cards**Comportamento atual:** - Todos os cards mostram "Or√ßamento N¬∫ X"**Comportamento desejado:**- Or√ßamento (Or√ßamento N¬∫ 8)- An√°lise de Cr√©dito (An√°lise N¬∫ 8)- Pedido Aprovado (Pedido N¬∫ 8)- Faturar (Faturar N¬∫ 8)- Faturado (Faturado N¬∫ 8)- Recibo (Recibo N¬∫ 8)**Implementa√ß√£o:**Mapear nome da etapa para prefixo do card:```javascriptconst etapaPrefixos = {    'orcamento': 'Or√ßamento N¬∫',    'analise': 'An√°lise N¬∫',    'aprovado': 'Pedido N¬∫',    'faturar': 'Faturar N¬∫',    'faturado': 'Faturado N¬∫',    'recibo': 'Recibo N¬∫'};```### 8. üîî Sistema de Notifica√ß√µes - INTEGRAR**Ao mover card entre etapas, registrar:**- Local (painel do m√≥dulo Vendas)- Global (painel de controle)**Exemplos de notifica√ß√µes:**- "Or√ßamento N¬∫ 47 movido para An√°lise de Cr√©dito"- "Pedido N¬∫ 51 faturado - NF 123456"- "Pedido N¬∫ 43 atrasado - Cliente: Hidr√°ulica SP"**Estrutura da notifica√ß√£o:**```javascript{    tipo: 'PEDIDO',    icone: 'fas fa-file-invoice',    titulo: 'Pedido movido',    mensagem: 'Or√ßamento N¬∫ 47 ‚Üí An√°lise de Cr√©dito',    timestamp: '2h atr√°s',    lido: false,    modulo: 'VENDAS'}```**API Endpoints:**- `POST /api/notifications` - Criar notifica√ß√£o- `GET /api/notifications` - Listar notifica√ß√µes- `PATCH /api/notifications/:id/read` - Marcar como lida- `DELETE /api/notifications/:id` - Deletar## PRIORIDADE DE IMPLEMENTA√á√çO1. **Alta**: Filtros do Kanban (conectar com funcionalidade)2. **Alta**: Nomenclatura din√¢mica nos cards3. **Alta**: Sistema de notifica√ß√µes para movimenta√ß√µes4. **M√©dia**: Coluna Faturado fixa5. **M√©dia**: Modal Exportar Dados6. **Baixa**: Modal Incluir Cliente (pesquisas)## C√ìDIGO PRINCIPAL### Localiza√ß√£o dos arquivos:- `modules/Vendas/public/kanban.html` - Interface do Kanban- `modules/Vendas/server.js` - Backend (linhas 687+ tem rota vendedores)- `modules/Vendas/routes/api.js` - Rotas da API### Fun√ß√µes-chave no kanban.html:- `renderCard(item)` - linha 5378 - Renderiza cada card- `aplicarFiltros()` - linha 6720 - Aplica filtros do modal- `abrirModalVendedor()` - linha 6740 - Modal de vendedores- `faturarTodos()` - linha 7883 - Modal faturar todos## OBSERVA√á√ïES- Backend j√° est√° com UTF-8MB4 configurado- Autentica√ß√£o Bearer token j√° implementada- Credenciais `include` j√° adicionadas nas requisi√ß√µes- Redirecionamento para p√°gina origem j√° funciona