<!DOCTYPE html>
<html lang="pt-br">
<head>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <meta charset="UTF-8">
  <title>Aluforce: eSocial</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <!-- Mobile Enterprise Design System -->
    <link rel="stylesheet" href="/css/design-system-mobile.css?v=20260202">
    <link rel="stylesheet" href="/css/responsive-global.css?v=20260202">
    <link rel="stylesheet" href="/css/mobile-master-2026.css?v=20260202">
    <link rel="stylesheet" href="/css/mobile-enterprise-enhancements.css?v=20260202">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <!-- Mobile Enhancement CSS -->
  <link rel="stylesheet" href="/css/design-system-mobile.css?v=20260201">
  <link rel="stylesheet" href="/css/mobile-enterprise-enhancements.css?v=20260201">
  <link rel="stylesheet" href="/css/esocial-mobile.css?v=20260201">
    <script src="/js/modal-title.js?v=20260210"></script>
    <!-- Chat Widget BOB AI --><!-- Chat Widget REMOVIDO --><!-- 
    <link rel="stylesheet" href="/chat/widget.css?v=20260218"> -->
</head>
<body class="bg-light">
  <div class="container py-4">
    <h1 class="mb-4">Envio de Eventos eSocial S-1.1</h1>
    <form id="esocialForm" class="card p-4 mb-4">
      <div class="mb-3">
        <label for="tipoEvento" class="form-label">Tipo de Evento</label>
        <select class="form-select" id="tipoEvento" required>
          <option value="">Selecione...</option>
          <option value="S-2200">S-2200 - Admissão</option>
          <option value="S-2299">S-2299 - Desligamento</option>
          <option value="S-1200">S-1200 - Remuneração</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="dadosEvento" class="form-label">Dados do Evento (JSON)</label>
        <textarea class="form-control" id="dadosEvento" rows="6" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Enviar Evento</button>
    </form>
    <div id="alerta"></div>
    <div id="resultado"></div>
  </div>
  <script>
    document.getElementById('esocialForm').onsubmit = async function(e) {
      e.preventDefault();
      const tipoEvento = document.getElementById('tipoEvento').value;
      let dadosEvento;
      try {
        dadosEvento = JSON.parse(document.getElementById('dadosEvento').value);
      } catch {
        mostrarAlerta('JSON inválido nos dados do evento.', 'danger');
        return;
      }
      const resp = await fetch('/api/rh/esocial', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ tipoEvento, dadosEvento })
      });
      const data = await resp.json();
      if (data.success) {
        mostrarAlerta('Evento enviado com sucesso!', 'success');
        document.getElementById('resultado').innerHTML = `<pre>${JSON.stringify(data.resultado, null, 2)}</pre>`;
      } else {
        mostrarAlerta(data.message || 'Erro ao enviar evento', 'danger');
      }
    };
    function mostrarAlerta(msg, tipo) {
      document.getElementById('alerta').innerHTML = `<div class="alert alert-${tipo} mt-2">${msg}</div>`;
      setTimeout(() => { document.getElementById('alerta').innerHTML = ''; }, 4000);
    }
  </script>

    <script src="/js/auth-unified.js?v=20260131c"></script>
    <script src="/js/mobile-auto-enhance.js?v=20260202" defer></script>
    <!-- Chat Widget BOB AI --><!-- Chat Widget REMOVIDO --><!-- 
    <script src="/chat/widget.js?v=20260218" defer></script> -->
</body>
</html>
