

<!-- ============================================================
     MODAIS ESTENDIDOS DE CONFIGURAÇÍO
     Modais adicionais para configurações avançadas
     ============================================================ -->

<!-- ============================================================
     RECURSOS HUMANOS
     ============================================================ -->

<!-- Modal: Gestão de Funcionários -->
<div id="modal-funcionarios" class="config-detail-modal">
    <div class="config-detail-modal-content config-modal-large">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-funcionarios')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-users"></i>
                </div>
                <div>
                    <h3>Gestão de Funcionários</h3>
                    <p>Cadastro e gerenciamento de colaboradores</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-funcionarios')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar" style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
                <button class="config-btn-primary" onclick="abrirModalNovoFuncionario()">
                    <i class="fas fa-plus"></i> Novo Funcionário
                </button>
                <button class="config-btn-secondary" onclick="importarFuncionarios()">
                    <i class="fas fa-file-excel"></i> Importar
                </button>
                <button class="config-btn-secondary" onclick="exportarFuncionarios()">
                    <i class="fas fa-download"></i> Exportar
                </button>
                <div style="flex: 1;"></div>
                <div class="config-form-group" style="margin: 0; min-width: 200px;">
                    <input type="text" id="busca-funcionario" class="config-input" placeholder="Buscar funcionário..." oninput="buscarFuncionarios(this.value)">
                </div>
                <div class="config-form-group" style="margin: 0;">
                    <select id="filtro-departamento-funcionario" class="config-input" onchange="filtrarFuncionariosPorDepartamento(this.value)">
                        <option value="">Todos Departamentos</option>
                        <!-- Será preenchido via JavaScript -->
                    </select>
                </div>
                <div class="config-form-group" style="margin: 0;">
                    <select id="filtro-status-funcionario" class="config-input" onchange="filtrarFuncionariosPorStatus(this.value)">
                        <option value="">Todos os Status</option>
                        <option value="ativo">Ativos</option>
                        <option value="inativo">Inativos</option>
                        <option value="ferias">Férias</option>
                        <option value="afastado">Afastados</option>
                    </select>
                </div>
            </div>

            <div class="config-table-container" style="max-height: 500px; overflow-y: auto;">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Nome</th>
                            <th>Cargo</th>
                            <th>Departamento</th>
                            <th>Admissão</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="funcionarios-list">
                        <tr>
                            <td colspan="6" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando funcionários...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Paginação -->
            <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                <span id="funcionarios-info" style="color: #6c757d; font-size: 14px;">Carregando...</span>
                <div id="funcionarios-paginacao" style="display: flex; gap: 5px;">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Novo/Editar Funcionário -->
<div id="modal-form-funcionario" class="config-detail-modal">
    <div class="config-detail-modal-content" style="max-width: 800px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-form-funcionario')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-user-plus"></i>
                </div>
                <div>
                    <h3 id="titulo-form-funcionario">Novo Funcionário</h3>
                    <p>Preencha os dados do colaborador</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-form-funcionario')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <form id="form-funcionario" onsubmit="salvarFuncionario(event)">
                <input type="hidden" id="func-id" name="id">
                
                <div class="config-form-section">
                    <h4 class="config-section-title"><i class="fas fa-user"></i> Dados Pessoais</h4>
                    <div class="config-form-grid">
                        <div class="config-form-group">
                            <label>Nome Completo *</label>
                            <input type="text" id="func-nome" name="nome" class="config-input" required>
                        </div>
                        <div class="config-form-group">
                            <label>CPF *</label>
                            <input type="text" id="func-cpf" name="cpf" class="config-input" placeholder="000.000.000-00" required>
                        </div>
                        <div class="config-form-group">
                            <label>RG</label>
                            <input type="text" id="func-rg" name="rg" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Data de Nascimento</label>
                            <input type="date" id="func-nascimento" name="data_nascimento" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Email</label>
                            <input type="email" id="func-email" name="email" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Telefone</label>
                            <input type="text" id="func-telefone" name="telefone" class="config-input" placeholder="(00) 00000-0000">
                        </div>
                    </div>
                </div>
                
                <div class="config-form-section">
                    <h4 class="config-section-title"><i class="fas fa-briefcase"></i> Dados Profissionais</h4>
                    <div class="config-form-grid">
                        <div class="config-form-group">
                            <label>Cargo *</label>
                            <input type="text" id="func-cargo" name="cargo" class="config-input" required>
                        </div>
                        <div class="config-form-group">
                            <label>Departamento *</label>
                            <select id="func-departamento" name="departamento" class="config-input" required>
                                <option value="">Selecione...</option>
                                <option value="Diretoria">Diretoria</option>
                                <option value="Administração">Administração</option>
                                <option value="Comercial">Comercial</option>
                                <option value="Financeiro">Financeiro</option>
                                <option value="Produção">Produção</option>
                                <option value="Logística">Logística</option>
                                <option value="RH">RH</option>
                                <option value="TI">TI</option>
                                <option value="Qualidade">Qualidade</option>
                            </select>
                        </div>
                        <div class="config-form-group">
                            <label>Data de Admissão *</label>
                            <input type="date" id="func-admissao" name="data_admissao" class="config-input" required>
                        </div>
                        <div class="config-form-group">
                            <label>Salário</label>
                            <input type="text" id="func-salario" name="salario" class="config-input" placeholder="R$ 0,00">
                        </div>
                        <div class="config-form-group">
                            <label>Status</label>
                            <select id="func-status" name="status" class="config-input">
                                <option value="ativo">Ativo</option>
                                <option value="inativo">Inativo</option>
                                <option value="ferias">Férias</option>
                                <option value="afastado">Afastado</option>
                            </select>
                        </div>
                        <div class="config-form-group">
                            <label>PIS/PASEP</label>
                            <input type="text" id="func-pis" name="pis" class="config-input">
                        </div>
                    </div>
                </div>
                
                <div class="config-form-section">
                    <h4 class="config-section-title"><i class="fas fa-map-marker-alt"></i> Endereço</h4>
                    <div class="config-form-grid">
                        <div class="config-form-group" style="flex: 2;">
                            <label>Endereço</label>
                            <input type="text" id="func-endereco" name="endereco" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Número</label>
                            <input type="text" id="func-numero" name="numero" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Bairro</label>
                            <input type="text" id="func-bairro" name="bairro" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>Cidade</label>
                            <input type="text" id="func-cidade" name="cidade" class="config-input">
                        </div>
                        <div class="config-form-group">
                            <label>CEP</label>
                            <input type="text" id="func-cep" name="cep" class="config-input" placeholder="00000-000">
                        </div>
                    </div>
                </div>
                
                <div class="config-form-actions">
                    <button type="button" class="config-btn-secondary" onclick="fecharModal('modal-form-funcionario')">
                        Cancelar
                    </button>
                    <button type="submit" class="config-btn-primary">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal: Visualizar Detalhes do Funcionário -->
<div id="modal-detalhes-funcionario" class="config-detail-modal">
    <div class="config-detail-modal-content" style="max-width: 900px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-detalhes-funcionario')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-blue" id="detalhe-func-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <h3 id="detalhe-func-nome">Nome do Funcionário</h3>
                    <p id="detalhe-func-cargo-dept">Cargo - Departamento</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-detalhes-funcionario')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Abas de Navegação -->
        <div class="config-tabs" style="padding: 0 24px; background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
            <button class="config-tab active" data-tab="tab-dados-func" onclick="abrirAbaDetalheFunc('dados')">
                <i class="fas fa-user"></i> Dados Pessoais
            </button>
            <button class="config-tab" data-tab="tab-solicitacoes-func" onclick="abrirAbaDetalheFunc('solicitacoes')">
                <i class="fas fa-file-alt"></i> Solicitações
            </button>
            <button class="config-tab" data-tab="tab-atestados-func" onclick="abrirAbaDetalheFunc('atestados')">
                <i class="fas fa-notes-medical"></i> Atestados
            </button>
        </div>
        
        <div class="config-detail-modal-body" style="padding: 24px; max-height: 500px; overflow-y: auto;">
            <!-- Aba: Dados Pessoais -->
            <div id="tab-dados-func" class="config-tab-content active">
                <div class="config-info-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                    <div class="config-info-item">
                        <span class="config-info-label">CPF</span>
                        <span class="config-info-value" id="detalhe-func-cpf">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">RG</span>
                        <span class="config-info-value" id="detalhe-func-rg">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Data de Nascimento</span>
                        <span class="config-info-value" id="detalhe-func-nascimento">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Email</span>
                        <span class="config-info-value" id="detalhe-func-email">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Telefone</span>
                        <span class="config-info-value" id="detalhe-func-telefone">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Status</span>
                        <span class="config-info-value" id="detalhe-func-status">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Data de Admissão</span>
                        <span class="config-info-value" id="detalhe-func-admissao">-</span>
                    </div>
                    <div class="config-info-item">
                        <span class="config-info-label">Salário</span>
                        <span class="config-info-value" id="detalhe-func-salario">-</span>
                    </div>
                    <div class="config-info-item" style="grid-column: span 2;">
                        <span class="config-info-label">Endereço</span>
                        <span class="config-info-value" id="detalhe-func-endereco">-</span>
                    </div>
                </div>
            </div>
            
            <!-- Aba: Solicitações -->
            <div id="tab-solicitacoes-func" class="config-tab-content" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h4 style="margin: 0; color: #1e293b;">Histórico de Solicitações</h4>
                    <button class="config-btn-primary" onclick="novaSolicitacaoFuncionario()">
                        <i class="fas fa-plus"></i> Nova Solicitação
                    </button>
                </div>
                <div id="lista-solicitacoes-func" class="config-items-list">
                    <div class="config-empty-state" style="padding: 40px; text-align: center; color: #6b7280;">
                        <i class="fas fa-file-alt" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                        <p>Nenhuma solicitação registrada</p>
                    </div>
                </div>
            </div>
            
            <!-- Aba: Atestados -->
            <div id="tab-atestados-func" class="config-tab-content" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h4 style="margin: 0; color: #1e293b;">Histórico de Atestados</h4>
                    <button class="config-btn-primary" onclick="novoAtestadoFuncionario()">
                        <i class="fas fa-plus"></i> Novo Atestado
                    </button>
                </div>
                <div id="lista-atestados-func" class="config-items-list">
                    <div class="config-empty-state" style="padding: 40px; text-align: center; color: #6b7280;">
                        <i class="fas fa-notes-medical" style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                        <p>Nenhum atestado registrado</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="config-detail-modal-footer" style="padding: 16px 24px; background: #f8fafc; border-top: 1px solid #e2e8f0; display: flex; justify-content: flex-end; gap: 12px;">
            <button class="config-btn-secondary" onclick="fecharModal('modal-detalhes-funcionario')">
                <i class="fas fa-times"></i> Fechar
            </button>
            <button class="config-btn-primary" onclick="editarFuncionarioDoDetalhe()">
                <i class="fas fa-edit"></i> Editar
            </button>
        </div>
    </div>
</div>

<!-- Modal: Importar Funcionários -->
<div id="modal-importar-funcionarios" class="config-detail-modal">
    <div class="config-detail-modal-content" style="max-width: 600px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-importar-funcionarios')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-file-excel"></i>
                </div>
                <div>
                    <h3>Importar Funcionários</h3>
                    <p>Importe dados de uma planilha Excel ou CSV</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-importar-funcionarios')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div style="text-align: center; padding: 30px; border: 2px dashed #dee2e6; border-radius: 10px; margin-bottom: 20px;">
                <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: #6c757d; margin-bottom: 15px;"></i>
                <p style="margin-bottom: 15px;">Arraste um arquivo Excel ou CSV aqui ou</p>
                <input type="file" id="arquivo-importacao" accept=".xlsx,.xls,.csv" style="display: none;" onchange="processarArquivoImportacao(this)">
                <button class="config-btn-primary" onclick="document.getElementById('arquivo-importacao').click()">
                    <i class="fas fa-folder-open"></i> Selecionar Arquivo
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                <h5 style="margin-bottom: 10px;"><i class="fas fa-info-circle"></i> Formato esperado:</h5>
                <p style="font-size: 13px; color: #6c757d; margin: 0;">
                    A planilha deve conter as colunas: <strong>Nome, CPF, Cargo, Departamento, Data Admissão, Email, Telefone</strong>
                </p>
                <button class="config-btn-link" style="margin-top: 10px; padding: 0;" onclick="baixarModeloImportacao()">
                    <i class="fas fa-download"></i> Baixar modelo de planilha
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Cargos e Funções -->
<div id="modal-cargos" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-cargos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-id-badge"></i>
                </div>
                <div>
                    <h3>Cargos e Funções</h3>
                    <p>Definir hierarquia organizacional</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-cargos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="novoCargo()">
                    <i class="fas fa-plus"></i> Novo Cargo
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th>Cargo</th>
                            <th>Departamento</th>
                            <th>Nível</th>
                            <th>CBO</th>
                            <th>Funcionários</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="cargos-list">
                        <tr>
                            <td colspan="6" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando cargos...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Folha de Pagamento -->
<div id="modal-folha-pagamento" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-folha-pagamento')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-money-check-alt"></i>
                </div>
                <div>
                    <h3>Folha de Pagamento</h3>
                    <p>Configurações de salários e benefícios</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-folha-pagamento')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-form-section">
                <h4 class="config-section-title"><i class="fas fa-calendar-alt"></i> Configurações Gerais</h4>
                
                <div class="config-form-grid">
                    <div class="config-form-group">
                        <label>Dia de Fechamento</label>
                        <select class="config-input">
                            <option value="25">Dia 25</option>
                            <option value="30">Dia 30</option>
                            <option value="ultimo">Último dia do mês</option>
                        </select>
                    </div>
                    <div class="config-form-group">
                        <label>Dia de Pagamento</label>
                        <select class="config-input">
                            <option value="5">Dia 5</option>
                            <option value="10">Dia 10</option>
                            <option value="15">Dia 15</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="config-form-section">
                <h4 class="config-section-title"><i class="fas fa-percentage"></i> Encargos e Descontos</h4>
                
                <div class="config-form-grid">
                    <div class="config-form-group">
                        <label>INSS Patronal (%)</label>
                        <input type="number" class="config-input" value="20" step="0.01">
                    </div>
                    <div class="config-form-group">
                        <label>FGTS (%)</label>
                        <input type="number" class="config-input" value="8" step="0.01">
                    </div>
                    <div class="config-form-group">
                        <label>Vale Transporte (%)</label>
                        <input type="number" class="config-input" value="6" step="0.01">
                    </div>
                    <div class="config-form-group">
                        <label>Vale Refeição (%)</label>
                        <input type="number" class="config-input" value="20" step="0.01">
                    </div>
                </div>
            </div>

            <div class="config-detail-modal-footer">
                <button type="button" class="config-btn-cancel" onclick="fecharModal('modal-folha-pagamento')">Cancelar</button>
                <button type="button" class="config-btn-save" onclick="saveFolhaPagamentoConfig()">
                    <i class="fas fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Ponto Eletrônico -->
<div id="modal-ponto-eletronico" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-ponto-eletronico')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-green">
                    <i class="fas fa-clock"></i>
                </div>
                <div>
                    <h3>Ponto Eletrônico</h3>
                    <p>Controle de jornada de trabalho</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-ponto-eletronico')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-form-section">
                <h4 class="config-section-title"><i class="fas fa-business-time"></i> Jornada de Trabalho Padrão</h4>
                
                <div class="config-form-grid">
                    <div class="config-form-group">
                        <label>Entrada</label>
                        <input type="time" class="config-input" value="08:00">
                    </div>
                    <div class="config-form-group">
                        <label>Saída Almoço</label>
                        <input type="time" class="config-input" value="12:00">
                    </div>
                    <div class="config-form-group">
                        <label>Retorno Almoço</label>
                        <input type="time" class="config-input" value="13:00">
                    </div>
                    <div class="config-form-group">
                        <label>Saída</label>
                        <input type="time" class="config-input" value="17:00">
                    </div>
                </div>
            </div>

            <div class="config-form-section">
                <h4 class="config-section-title"><i class="fas fa-cog"></i> Configurações</h4>
                
                <div class="config-toggle-list">
                    <div class="config-toggle-item">
                        <div class="config-toggle-info">
                            <strong>Tolerncia de Atraso</strong>
                            <span>Permitir até 10 minutos de tolerncia</span>
                        </div>
                        <label class="config-toggle-switch">
                            <input type="checkbox" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                    </div>
                    <div class="config-toggle-item">
                        <div class="config-toggle-info">
                            <strong>Horas Extras Automáticas</strong>
                            <span>Calcular horas extras automaticamente</span>
                        </div>
                        <label class="config-toggle-switch">
                            <input type="checkbox" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                    </div>
                    <div class="config-toggle-item">
                        <div class="config-toggle-info">
                            <strong>Notificar Gestores</strong>
                            <span>Enviar alertas de ausências</span>
                        </div>
                        <label class="config-toggle-switch">
                            <input type="checkbox">
                            <span class="config-toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="config-detail-modal-footer">
                <button type="button" class="config-btn-cancel" onclick="fecharModal('modal-ponto-eletronico')">Cancelar</button>
                <button type="button" class="config-btn-save" onclick="savePontoConfig()">
                    <i class="fas fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ============================================================
     CLIENTES E FORNECEDORES
     ============================================================ -->

<!-- Modal: Grupos de Clientes -->
<div id="modal-grupos-clientes" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-grupos-clientes')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-purple">
                    <i class="fas fa-layer-group"></i>
                </div>
                <div>
                    <h3>Grupos de Clientes</h3>
                    <p>Segmentação de clientes</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-grupos-clientes')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="novoGrupoCliente()">
                    <i class="fas fa-plus"></i> Novo Grupo
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th>Nome do Grupo</th>
                            <th>Desconto (%)</th>
                            <th>Prazo Padrão</th>
                            <th>Clientes</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>VIP</td>
                            <td>15%</td>
                            <td>30 dias</td>
                            <td>25</td>
                            <td class="config-actions">
                                <button class="config-btn-icon" title="Editar"><i class="fas fa-edit"></i></button>
                                <button class="config-btn-icon" title="Excluir"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                        <tr>
                            <td>Revendedor</td>
                            <td>10%</td>
                            <td>21 dias</td>
                            <td>48</td>
                            <td class="config-actions">
                                <button class="config-btn-icon" title="Editar"><i class="fas fa-edit"></i></button>
                                <button class="config-btn-icon" title="Excluir"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                        <tr>
                            <td>Comum</td>
                            <td>0%</td>
                            <td>14 dias</td>
                            <td>156</td>
                            <td class="config-actions">
                                <button class="config-btn-icon" title="Editar"><i class="fas fa-edit"></i></button>
                                <button class="config-btn-icon" title="Excluir"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Regiões de Venda -->
<div id="modal-regioes-venda" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-regioes-venda')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-purple">
                    <i class="fas fa-map-marked-alt"></i>
                </div>
                <div>
                    <h3>Regiões de Venda</h3>
                    <p>Territórios e áreas de atuação</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-regioes-venda')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="novaRegiao()">
                    <i class="fas fa-plus"></i> Nova Região
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="min-width: 150px;">Região</th>
                            <th style="min-width: 180px;">Estados</th>
                            <th style="min-width: 180px;">Vendedor Responsável</th>
                            <th style="min-width: 80px;">Clientes</th>
                            <th style="min-width: 100px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="regioes-venda-tbody">
                        <tr>
                            <td colspan="5" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando regiões...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Tipos de Fornecedor -->
<div id="modal-tipos-fornecedor" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-tipos-fornecedor')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-purple">
                    <i class="fas fa-truck"></i>
                </div>
                <div>
                    <h3>Tipos de Fornecedor</h3>
                    <p>Categorização de fornecedores</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-tipos-fornecedor')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="novoTipoFornecedor()">
                    <i class="fas fa-plus"></i> Novo Tipo
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="min-width: 150px;">Tipo</th>
                            <th style="min-width: 250px;">Descrição</th>
                            <th style="min-width: 100px;">Fornecedores</th>
                            <th style="min-width: 100px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="tipos-fornecedor-tbody">
                        <tr>
                            <td colspan="4" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando tipos...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Condições de Pagamento -->
<div id="modal-condicoes-pagamento" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-condicoes-pagamento')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-purple">
                    <i class="fas fa-handshake"></i>
                </div>
                <div>
                    <h3>Condições de Pagamento</h3>
                    <p>Prazos e condições comerciais</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-condicoes-pagamento')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="novaCondicao()">
                    <i class="fas fa-plus"></i> Nova Condição
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="min-width: 150px;">Condição</th>
                            <th style="min-width: 80px;">Parcelas</th>
                            <th style="min-width: 120px;">Prazo</th>
                            <th style="min-width: 80px;">Acréscimo</th>
                            <th style="min-width: 100px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="condicoes-pagamento-tbody">
                        <tr>
                            <td colspan="5" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando condições...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- ============================================================
     VENDA DE PRODUTOS - ADICIONAIS
     ============================================================ -->

<!-- Modal: Tabelas de Preço -->
<div id="modal-tabelas-preco" class="config-detail-modal">
    <div class="config-detail-modal-content config-modal-large">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-tabelas-preco')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-teal">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div>
                    <h3>Tabelas de Preço</h3>
                    <p>Precificação e descontos</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-tabelas-preco')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botões de ação -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormTabelaPreco()">
                    <i class="fas fa-plus"></i> Nova Tabela
                </button>
                <button class="config-btn-secondary" onclick="importarTabelasPreco()">
                    <i class="fas fa-file-import"></i> Importar
                </button>
            </div>

            <!-- Formulário Novo/Editar Tabela (oculto inicialmente) -->
            <div id="form-nova-tabela-preco" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f0fdfa; border: 2px solid #14b8a6; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #0d9488; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-dollar-sign"></i>
                            <span id="form-tabela-preco-titulo">Nova Tabela de Preço</span>
                        </h4>
                        <button type="button" onclick="fecharFormTabelaPreco()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-tabela-preco-config">
                        <input type="hidden" id="tabela-preco-id">
                        
                        <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #14b8a6; margin-right: 6px;"></i>Nome da Tabela *</label>
                                <input type="text" id="tabela-preco-nome" class="config-form-input" placeholder="Ex: Tabela Geral, Revendedores" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-list" style="color: #14b8a6; margin-right: 6px;"></i>Tipo</label>
                                <select id="tabela-preco-tipo" class="config-form-input">
                                    <option value="padrao">Padrão</option>
                                    <option value="desconto">Desconto</option>
                                    <option value="promocao">Promoção</option>
                                    <option value="atacado">Atacado</option>
                                    <option value="varejo">Varejo</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-calendar" style="color: #14b8a6; margin-right: 6px;"></i>Validade</label>
                                <input type="date" id="tabela-preco-validade" class="config-form-input">
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-file-alt" style="color: #14b8a6; margin-right: 6px;"></i>Descrição</label>
                                <textarea id="tabela-preco-descricao" class="config-form-input" placeholder="Descrição opcional..." rows="2"></textarea>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-toggle-on" style="color: #14b8a6; margin-right: 6px;"></i>Status</label>
                                <select id="tabela-preco-status" class="config-form-input">
                                    <option value="ativo">Ativa</option>
                                    <option value="inativo">Inativa</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormTabelaPreco()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarTabelaPrecoInline()" style="background: linear-gradient(135deg, #14b8a6, #0d9488);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tabela de Preços com visual melhorado -->
            <div class="config-table-container" style="border: 1px solid #e5e7eb; border-radius: 10px; overflow: hidden;">
                <table class="config-table" style="margin: 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 100px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Status <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Nome da Tabela <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 100px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Tipo <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 110px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Validade <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 90px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Produtos <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; width: 100px; text-align: center;">
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody id="tabelas-preco-tbody">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 50px 20px; color: #9ca3af;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block;"></i>
                                Carregando tabelas de preço...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Paginação -->
            <div class="config-pagination" style="margin-top: 20px;">
                <span id="tabelas-preco-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Unidades de Medida -->
<div id="modal-unidades-medida" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-unidades-medida')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-teal">
                    <i class="fas fa-ruler"></i>
                </div>
                <div>
                    <h3>Unidades de Medida</h3>
                    <p>Conversões e padrões</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-unidades-medida')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botão de ação -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormUnidade()">
                    <i class="fas fa-plus"></i> Nova Unidade
                </button>
            </div>

            <!-- Formulário Novo/Editar Unidade (oculto inicialmente) -->
            <div id="form-nova-unidade" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f0fdfa; border: 2px solid #14b8a6; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #0d9488; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-ruler"></i>
                            <span id="form-unidade-titulo">Nova Unidade de Medida</span>
                        </h4>
                        <button type="button" onclick="fecharFormUnidade()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-unidade-config">
                        <input type="hidden" id="unidade-id">
                        
                        <div style="display: grid; grid-template-columns: 100px 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-font" style="color: #14b8a6; margin-right: 6px;"></i>Sigla *</label>
                                <input type="text" id="unidade-sigla" class="config-form-input" placeholder="UN" maxlength="10" style="text-transform: uppercase;" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #14b8a6; margin-right: 6px;"></i>Nome *</label>
                                <input type="text" id="unidade-nome" class="config-form-input" placeholder="Ex: Unidade, Metro, Quilograma" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-list" style="color: #14b8a6; margin-right: 6px;"></i>Tipo</label>
                                <select id="unidade-tipo" class="config-form-input">
                                    <option value="quantidade">Quantidade</option>
                                    <option value="comprimento">Comprimento</option>
                                    <option value="peso">Peso</option>
                                    <option value="volume">Volume</option>
                                    <option value="area">Área</option>
                                    <option value="tempo">Tempo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormUnidade()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarUnidadeInline()" style="background: linear-gradient(135deg, #14b8a6, #0d9488);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tabela de Unidades com visual melhorado -->
            <div class="config-table-container" style="border: 1px solid #e5e7eb; border-radius: 10px; overflow: hidden;">
                <table class="config-table" style="margin: 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 100px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Sigla <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Nome <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 120px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Tipo <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; width: 100px; text-align: center;">
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody id="unidades-medida-tbody">
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 50px 20px; color: #9ca3af;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block;"></i>
                                Carregando unidades...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Paginação -->
            <div class="config-pagination" style="margin-top: 20px;">
                <span id="unidades-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Códigos NCM -->
<div id="modal-ncm" class="config-detail-modal">
    <div class="config-detail-modal-content config-modal-large">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-ncm')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-teal">
                    <i class="fas fa-barcode"></i>
                </div>
                <div>
                    <h3>Códigos NCM</h3>
                    <p>Nomenclatura Comum do Mercosul</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-ncm')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Campo de busca melhorado -->
            <div style="margin-bottom: 20px;">
                <div style="position: relative;">
                    <i class="fas fa-search" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #9ca3af;"></i>
                    <input type="text" 
                           id="ncm-search" 
                           placeholder="Buscar NCM por código ou descrição..." 
                           oninput="filtrarNCM(this.value)"
                           style="width: 100%; padding: 14px 16px 14px 44px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 14px; transition: border-color 0.2s, box-shadow 0.2s; outline: none;"
                           onfocus="this.style.borderColor='#14b8a6'; this.style.boxShadow='0 0 0 3px rgba(20, 184, 166, 0.1)'"
                           onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
                </div>
            </div>

            <!-- Tabela de NCM com visual melhorado -->
            <div class="config-table-container" style="border: 1px solid #e5e7eb; border-radius: 10px; overflow: hidden;">
                <table class="config-table" style="margin: 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 130px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    NCM <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Descrição <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 80px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    IPI (%) <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; width: 80px; text-align: center;">
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody id="ncm-list">
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 50px 20px; color: #9ca3af;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block;"></i>
                                Carregando códigos NCM...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Paginação -->
            <div class="config-pagination" style="margin-top: 20px;">
                <span id="ncm-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================================
     VENDA DE SERVIÇOS - ADICIONAIS
     ============================================================ -->

<!-- Modal: Tipos de Serviço -->
<div id="modal-tipos-servico" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-tipos-servico')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                    <i class="fas fa-concierge-bell"></i>
                </div>
                <div>
                    <h3 style="text-transform: uppercase; font-weight: 600;">Tipos de Serviço</h3>
                    <p>Categorias de serviços prestados</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-tipos-servico')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Formulário Inline -->
            <div id="form-tipo-servico" class="config-inline-form" style="display: none; background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <input type="hidden" id="tipo-servico-id">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Tipo de Serviço *</label>
                        <input type="text" id="tipo-servico-nome" class="form-control" placeholder="Ex: Instalação Elétrica" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Código LC 116</label>
                        <input type="text" id="tipo-servico-codigo-lc" class="form-control" placeholder="Ex: 14.01" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">ISS (%)</label>
                        <input type="number" id="tipo-servico-iss" class="form-control" placeholder="Ex: 5" step="0.01" min="0" max="100" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="config-btn-secondary" onclick="cancelarFormTipoServico()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="button" class="config-btn-primary" onclick="salvarTipoServicoInline()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-check"></i> Salvar
                    </button>
                </div>
            </div>

            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="abrirFormTipoServico()">
                    <i class="fas fa-plus"></i> Novo Tipo
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8f9fa, #e9ecef);">
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">TIPO DE SERVIÇO</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">CÓDIGO LC 116</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">ISS (%)</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px; text-align: center;">AÇÕES</th>
                        </tr>
                    </thead>
                    <tbody id="tipos-servico-tbody">
                        <tr>
                            <td colspan="4" class="config-empty">Carregando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Modelos de Contrato -->
<div id="modal-contratos" class="config-detail-modal">
    <div class="config-detail-modal-content config-modal-large">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-contratos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                    <i class="fas fa-file-contract"></i>
                </div>
                <div>
                    <h3 style="text-transform: uppercase; font-weight: 600;">Modelos de Contrato</h3>
                    <p>Templates e cláusulas padrão</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-contratos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Formulário Inline -->
            <div id="form-modelo-contrato" class="config-inline-form" style="display: none; background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <input type="hidden" id="modelo-contrato-id">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Nome do Modelo *</label>
                        <input type="text" id="modelo-contrato-nome" class="form-control" placeholder="Ex: Contrato de Prestação de Serviços" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Tipo</label>
                        <select id="modelo-contrato-tipo" class="form-control" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                            <option value="servico">Prestação de Serviços</option>
                            <option value="manutencao">Manutenção</option>
                            <option value="locacao">Locação</option>
                            <option value="fornecimento">Fornecimento</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="margin: 0 0 15px 0;">
                    <label style="font-weight: 600; margin-bottom: 5px; display: block;">Descrição</label>
                    <input type="text" id="modelo-contrato-descricao" class="form-control" placeholder="Breve descrição do modelo" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div class="form-group" style="margin: 0 0 15px 0;">
                    <label style="font-weight: 600; margin-bottom: 5px; display: block;">Conteúdo do Contrato</label>
                    <textarea id="modelo-contrato-conteudo" class="form-control" placeholder="Digite o conteúdo/cláusulas do contrato..." rows="6" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="config-btn-secondary" onclick="cancelarFormModeloContrato()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="button" class="config-btn-primary" onclick="salvarModeloContratoInline()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-check"></i> Salvar
                    </button>
                </div>
            </div>

            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="abrirFormModeloContrato()">
                    <i class="fas fa-plus"></i> Novo Modelo
                </button>
            </div>

            <div id="contratos-cards-grid" class="config-cards-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px;">
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 24px;"></i>
                    <p style="margin-top: 10px;">Carregando...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: SLA de Atendimento -->
<div id="modal-sla" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-sla')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                    <i class="fas fa-stopwatch"></i>
                </div>
                <div>
                    <h3 style="text-transform: uppercase; font-weight: 600;">SLA de Atendimento</h3>
                    <p>Níveis de serviço acordados</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-sla')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Formulário Inline -->
            <div id="form-sla" class="config-inline-form" style="display: none; background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <input type="hidden" id="sla-id">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Prioridade *</label>
                        <select id="sla-prioridade" class="form-control" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                            <option value="critica">Crítica</option>
                            <option value="alta">Alta</option>
                            <option value="media">Média</option>
                            <option value="baixa">Baixa</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Tempo de Resposta *</label>
                        <input type="text" id="sla-tempo-resposta" class="form-control" placeholder="Ex: 30 minutos" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 600; margin-bottom: 5px; display: block;">Tempo de Solução *</label>
                        <input type="text" id="sla-tempo-solucao" class="form-control" placeholder="Ex: 4 horas" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="config-btn-secondary" onclick="cancelarFormSLA()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="button" class="config-btn-primary" onclick="salvarSLAInline()" style="padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-check"></i> Salvar
                    </button>
                </div>
            </div>

            <div class="config-toolbar">
                <button class="config-btn-primary" onclick="abrirFormSLA()">
                    <i class="fas fa-plus"></i> Novo SLA
                </button>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8f9fa, #e9ecef);">
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">PRIORIDADE</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">TEMPO DE RESPOSTA</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px;">TEMPO DE SOLUÇÍO</th>
                            <th style="text-transform: uppercase; font-weight: 600; font-size: 11px; letter-spacing: 0.5px; text-align: center;">AÇÕES</th>
                        </tr>
                    </thead>
                    <tbody id="sla-tbody">
                        <tr>
                            <td colspan="4" class="config-empty">Carregando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: NFS-e -->
<div id="modal-nfse" class="config-detail-modal">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-nfse')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #dc3545, #c82333);">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div>
                    <h3 style="text-transform: uppercase; font-weight: 600;">NFS-e</h3>
                    <p>Nota Fiscal de Serviços Eletrônica</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-nfse')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Seção: Dados do Prestador -->
            <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="margin: 0 0 15px 0; font-size: 14px; font-weight: 600; color: #333; display: flex; align-items: center; gap: 8px;">
                    <span style="width: 28px; height: 28px; background: linear-gradient(135deg, #007bff, #0056b3); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-building" style="color: white; font-size: 12px;"></i>
                    </span>
                    Dados do Prestador
                </h4>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 500; margin-bottom: 5px; display: block; color: #dc3545; font-size: 12px;">Inscrição Municipal</label>
                        <input type="text" id="nfse-inscricao-municipal" class="form-control" placeholder="Nº Inscrição Municipal" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 500; margin-bottom: 5px; display: block; color: #dc3545; font-size: 12px;">Código do Município</label>
                        <input type="text" id="nfse-codigo-municipio" class="form-control" placeholder="Código IBGE" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
            </div>

            <!-- Seção: Configurações de Emissão -->
            <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="margin: 0 0 15px 0; font-size: 14px; font-weight: 600; color: #333; display: flex; align-items: center; gap: 8px;">
                    <span style="width: 28px; height: 28px; background: linear-gradient(135deg, #007bff, #0056b3); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-cog" style="color: white; font-size: 12px;"></i>
                    </span>
                    Configurações de Emissão
                </h4>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 500; margin-bottom: 5px; display: block; color: #333; font-size: 12px;">Ambiente</label>
                        <select id="nfse-ambiente" class="form-control" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                            <option value="homologacao">Homologação (Testes)</option>
                            <option value="producao">Produção</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin: 0;">
                        <label style="font-weight: 500; margin-bottom: 5px; display: block; color: #333; font-size: 12px;">Regime de Tributação</label>
                        <select id="nfse-regime-tributacao" class="form-control" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                            <option value="1">Microempresa Municipal</option>
                            <option value="2">Estimativa</option>
                            <option value="3">Sociedade de Profissionais</option>
                            <option value="4">Cooperativa</option>
                            <option value="5">MEI</option>
                            <option value="6">ME/EPP Simples Nacional</option>
                        </select>
                    </div>
                </div>

                <!-- Toggle: Envio Automático -->
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 6px; margin-bottom: 10px;">
                    <div>
                        <strong style="font-size: 13px; color: #333;">Envio Automático por E-mail</strong>
                        <p style="margin: 3px 0 0 0; font-size: 12px; color: #666;">Enviar NFS-e automaticamente ao tomador</p>
                    </div>
                    <label style="position: relative; display: inline-block; width: 50px; height: 26px;">
                        <input type="checkbox" id="nfse-envio-automatico" checked style="opacity: 0; width: 0; height: 0;">
                        <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .3s; border-radius: 26px;" class="nfse-slider" onclick="toggleNfseCheckbox('nfse-envio-automatico', this)"></span>
                    </label>
                </div>

                <!-- Toggle: Reter ISS -->
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                    <div>
                        <strong style="font-size: 13px; color: #333;">Reter ISS</strong>
                        <p style="margin: 3px 0 0 0; font-size: 12px; color: #666;">Habilitar retenção de ISS na fonte</p>
                    </div>
                    <label style="position: relative; display: inline-block; width: 50px; height: 26px;">
                        <input type="checkbox" id="nfse-reter-iss" style="opacity: 0; width: 0; height: 0;">
                        <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .3s; border-radius: 26px;" class="nfse-slider" onclick="toggleNfseCheckbox('nfse-reter-iss', this)"></span>
                    </label>
                </div>
            </div>

            <!-- Botões -->
            <div style="display: flex; justify-content: flex-end; gap: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                <button type="button" onclick="fecharModal('modal-nfse')" style="padding: 10px 25px; border: 1px solid #ddd; background: white; border-radius: 6px; cursor: pointer; font-size: 14px;">
                    Cancelar
                </button>
                <button type="button" onclick="saveNfseConfig()" style="padding: 10px 25px; background: linear-gradient(135deg, #28a745, #218838); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ============================================================
     MODAIS ORIGINAIS - VENDA DE PRODUTOS
     ============================================================ -->

<!-- Modal: Venda de Produtos - Configurações -->
<div id="modal-venda-produtos" class="config-detail-modal">
    <div class="config-detail-modal-content" style="max-width: 700px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div>
                    <h3>Venda de Produtos</h3>
                    <p>Configurações de etapas e tabelas de preço</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-venda-produtos')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="config-detail-modal-body" style="max-height: 70vh; overflow-y: auto;">
            <form id="form-venda-produtos">
                <!-- Etapas do Pedido -->
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tasks" style="color: #6366f1;"></i> Etapas do Pedido de Venda + Orçamento
                    </h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px 20px;">
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_orcamento" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Orçamento</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_pedido_aprovado" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Pedido Aprovado</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_analise_credito" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Análise de Crédito</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_faturar" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Faturar</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_faturado" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Faturado</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 6px; font-size: 13px; cursor: pointer;">
                            <input type="checkbox" name="etapa_entregue" checked style="width: 16px; height: 16px; accent-color: #6366f1;">
                            <span>Entregue</span>
                        </label>
                    </div>
                    <small style="display: block; margin-top: 12px; color: #6b7280; font-size: 12px;">
                        Total: 6 de 6 registros
                    </small>
                </div>

                <!-- Tabelas de Preço -->
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tags" style="color: #6366f1;"></i> Tabelas de Preço dos Produtos
                    </h4>
                    
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="bloquear-preco-tabela" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label" style="line-height: 1.4;">
                            <strong style="display: block; font-size: 13px; color: #374151;">Não permitir alterar o preço unitário do produto se alguma tabela de preço estiver disponível</strong>
                            <span style="font-size: 12px; color: #6b7280;">Tanto no cadastro do produto quanto lá no pedido de venda (mas usuários administradores podem mesmo assim).</span>
                        </div>
                    </div>
                    
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="permitir-orcamento">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label" style="line-height: 1.4;">
                            <strong style="display: block; font-size: 13px; color: #374151;">Permitir que o pedido de venda seja marcado como uma proposta (ou orçamento)</strong>
                        </div>
                    </div>
                </div>

                <!-- Numeração -->
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-sort-numeric-up" style="color: #6366f1;"></i> Alterar o número dos próximos Pedidos de Venda e Remessas de Produto
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="config-form-group">
                            <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 6px;">Próximo número de Pedido</label>
                            <input type="number" name="proximo_numero_pedido" id="proximo-numero-pedido" value="1001" min="1" 
                                   style="width: 100%; padding: 10px 12px; border: 2px solid #10b981; border-radius: 8px; font-size: 14px; background: #f0fdf4;">
                        </div>
                        <div class="config-form-group">
                            <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 6px;">Próxima Remessa</label>
                            <input type="number" name="proxima_remessa" id="proxima-remessa" value="5001" min="1" 
                                   style="width: 100%; padding: 10px 12px; border: 2px solid #10b981; border-radius: 8px; font-size: 14px; background: #f0fdf4;">
                        </div>
                    </div>
                </div>

                <!-- Reserva de Estoque -->
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-warehouse" style="color: #6366f1;"></i> Reserva de Estoque
                    </h4>
                    
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="habilitar-reserva-estoque">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label" style="line-height: 1.4;">
                            <strong style="display: block; font-size: 13px; color: #374151;">Habilitar a reserva de estoque em pedidos de venda e remessa</strong>
                        </div>
                    </div>
                    
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="reservar-automaticamente">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label" style="line-height: 1.4;">
                            <strong style="display: block; font-size: 13px; color: #374151;">Reservar o estoque automaticamente para novos itens</strong>
                        </div>
                    </div>
                </div>

                <!-- Gestão de Frete -->
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-truck" style="color: #6366f1;"></i> Gestão de Frete
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div>
                            <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 8px;">Tipos de Entrega</label>
                            <button type="button" class="config-btn-frete" onclick="abrirModalTiposEntrega()" 
                                    style="width: 100%; padding: 12px 16px; background: linear-gradient(135deg, #ef4444, #f87171); color: white; border: none; border-radius: 8px; font-size: 13px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                                <i class="fas fa-truck"></i> Definir os Tipos de Entrega para suas Transportadoras
                            </button>
                        </div>
                        <div>
                            <label style="display: block; font-size: 12px; color: #6b7280; margin-bottom: 8px;">Informações de Frete</label>
                            <button type="button" class="config-btn-frete" onclick="abrirModalInfoFrete()" 
                                    style="width: 100%; padding: 12px 16px; background: linear-gradient(135deg, #ef4444, #f87171); color: white; border: none; border-radius: 8px; font-size: 13px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;">
                                <i class="fas fa-info-circle"></i> Alterar Informações de Frete e Rastreio
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="config-detail-modal-footer" style="display: flex; justify-content: flex-end; gap: 12px; padding: 16px 24px; border-top: 1px solid #e5e7eb; background: #f9fafb;">
            <button class="config-btn-secondary" onclick="fecharModal('modal-venda-produtos')" style="padding: 10px 20px; background: #fff; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-times"></i> Cancelar
            </button>
            <button class="config-btn-primary" onclick="saveVendaProdutosConfig()" style="padding: 10px 20px; background: linear-gradient(135deg, #3b82f6, #60a5fa); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-save"></i> Salvar Configurações
            </button>
        </div>
    </div>
</div>

<!-- Modal: Tipos de Entrega -->
<div id="modal-tipos-entrega" class="config-detail-modal" style="display: none;">
    <div class="config-detail-modal-content" style="max-width: 800px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-tipos-entrega')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #ef4444, #f87171);">
                    <i class="fas fa-truck"></i>
                </div>
                <div>
                    <h3>Tipos de Entrega</h3>
                    <p>Defina os tipos de entrega para suas transportadoras</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-tipos-entrega')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="config-detail-modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormTipoEntrega()">
                    <i class="fas fa-plus"></i> Incluir Tipo
                </button>
            </div>

            <div id="form-tipo-entrega" style="display: none; margin-bottom: 20px;">
                <div style="background: #fef2f2; border: 2px solid #ef4444; border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h4 style="margin: 0; color: #ef4444;"><i class="fas fa-truck"></i> <span id="form-tipo-entrega-titulo">Novo Tipo de Entrega</span></h4>
                        <button type="button" onclick="fecharFormTipoEntrega()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;"><i class="fas fa-times"></i></button>
                    </div>
                    <form id="form-tipo-entrega-config">
                        <input type="hidden" id="tipo-entrega-id">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label>Nome do Tipo *</label>
                                <input type="text" id="tipo-entrega-nome" class="config-form-input" placeholder="Ex: Entrega Normal, Expressa" required>
                            </div>
                            <div class="config-form-group">
                                <label>Prazo (dias)</label>
                                <input type="number" id="tipo-entrega-prazo" class="config-form-input" placeholder="0" min="0">
                            </div>
                            <div class="config-form-group">
                                <label>Transportadora</label>
                                <select id="tipo-entrega-transportadora" class="config-form-input">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>
                            <div class="config-form-group">
                                <label>Situação</label>
                                <select id="tipo-entrega-situacao" class="config-form-input">
                                    <option value="ativo">Ativo</option>
                                    <option value="inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 16px;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormTipoEntrega()"><i class="fas fa-times"></i> Cancelar</button>
                            <button type="button" class="config-btn-primary" onclick="salvarTipoEntrega()" style="background: linear-gradient(135deg, #ef4444, #f87171);"><i class="fas fa-save"></i> Salvar</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th>Situação</th>
                            <th>Nome</th>
                            <th>Prazo</th>
                            <th>Transportadora</th>
                            <th style="width: 100px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="tipos-entrega-list">
                        <tr><td colspan="5" class="text-center" style="padding: 40px; color: #6b7280;"><i class="fas fa-inbox" style="font-size: 32px; margin-bottom: 12px; display: block;"></i>Nenhum tipo de entrega cadastrado</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Informações de Frete -->
<div id="modal-info-frete" class="config-detail-modal" style="display: none;">
    <div class="config-detail-modal-content" style="max-width: 700px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-info-frete')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #ef4444, #f87171);">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div>
                    <h3>Informações de Frete e Rastreio</h3>
                    <p>Configure as informações de frete padrão</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-info-frete')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="config-detail-modal-body">
            <form id="form-info-frete">
                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151;"><i class="fas fa-truck-loading" style="color: #ef4444; margin-right: 8px;"></i>Modalidade de Frete Padrão</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                        <div class="config-form-group">
                            <label>Modalidade</label>
                            <select id="frete-modalidade" class="config-form-input">
                                <option value="cif">CIF - Frete por conta do Remetente</option>
                                <option value="fob">FOB - Frete por conta do Destinatário</option>
                                <option value="terceiros">Frete por conta de Terceiros</option>
                                <option value="sem_frete">Sem Frete</option>
                            </select>
                        </div>
                        <div class="config-form-group">
                            <label>Frete Mínimo (R$)</label>
                            <input type="text" id="frete-minimo" class="config-form-input" placeholder="0,00" oninput="formatarMoedaConfig(this)">
                        </div>
                    </div>
                </div>

                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151;"><i class="fas fa-map-marker-alt" style="color: #ef4444; margin-right: 8px;"></i>Rastreamento</h4>
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="habilitar-rastreamento">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong style="display: block; font-size: 13px; color: #374151;">Habilitar rastreamento de entregas</strong>
                            <span style="font-size: 12px; color: #6b7280;">Permite inserir código de rastreio nos pedidos</span>
                        </div>
                    </div>
                    <div class="config-form-group">
                        <label>URL Base de Rastreamento</label>
                        <input type="text" id="frete-url-rastreio" class="config-form-input" placeholder="https://www.correios.com.br/rastro?codigo=">
                    </div>
                </div>

                <div class="config-form-card" style="background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151;"><i class="fas fa-envelope" style="color: #ef4444; margin-right: 8px;"></i>Notificações</h4>
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="notificar-despacho">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong style="display: block; font-size: 13px; color: #374151;">Notificar cliente no despacho</strong>
                        </div>
                    </div>
                    <div class="config-toggle" style="display: flex; align-items: flex-start; gap: 12px;">
                        <label class="config-toggle-switch" style="flex-shrink: 0;">
                            <input type="checkbox" id="notificar-entrega">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong style="display: block; font-size: 13px; color: #374151;">Notificar cliente na entrega</strong>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="config-detail-modal-footer" style="display: flex; justify-content: flex-end; gap: 12px; padding: 16px 24px; border-top: 1px solid #e5e7eb;">
            <button class="config-btn-secondary" onclick="fecharModal('modal-info-frete')" style="padding: 10px 20px; background: #fff; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; cursor: pointer;">
                <i class="fas fa-times"></i> Cancelar
            </button>
            <button class="config-btn-primary" onclick="salvarInfoFrete()" style="padding: 10px 20px; background: linear-gradient(135deg, #ef4444, #f87171); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer;">
                <i class="fas fa-save"></i> Salvar
            </button>
        </div>
    </div>
</div>

<!-- Modal: Venda de Serviços - Configurações -->
<div id="modal-venda-servicos" class="config-detail-modal">
    <div class="config-detail-modal-content" style="max-width: 600px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #64748b 0%, #475569 100%);">
                    <i class="fas fa-briefcase"></i>
                </div>
                <div>
                    <h3>Venda de Serviços</h3>
                    <p>Configurações de ordens de serviço</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-venda-servicos')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="config-detail-modal-body">
            <form id="form-venda-servicos">
                <!-- Etapas da Ordem de Serviço -->
                <div style="background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-tasks" style="color: #3b82f6;"></i> Etapas da Ordem de Serviço
                    </h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 16px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="etapa-ordem-servico" checked style="width: 18px; height: 18px; accent-color: #3b82f6; cursor: pointer;">
                            <span style="font-size: 13px; color: #374151;">Ordem de Serviço</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="etapa-em-execucao" checked style="width: 18px; height: 18px; accent-color: #3b82f6; cursor: pointer;">
                            <span style="font-size: 13px; color: #374151;">Em Execução</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="etapa-executada" checked style="width: 18px; height: 18px; accent-color: #3b82f6; cursor: pointer;">
                            <span style="font-size: 13px; color: #374151;">Executada</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="etapa-faturar-servico" checked style="width: 18px; height: 18px; accent-color: #3b82f6; cursor: pointer;">
                            <span style="font-size: 13px; color: #374151;">Faturar</span>
                        </label>
                    </div>
                    <p style="margin: 12px 0 0 0; font-size: 12px; color: #6b7280;">
                        Total: 1-6 de 6 registros
                    </p>
                </div>

                <!-- Proposta/Orçamento -->
                <div style="background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-file-alt" style="color: #3b82f6;"></i> Proposta e Orçamento
                    </h4>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <label class="config-toggle-switch" style="position: relative; display: inline-block; width: 48px; height: 26px; flex-shrink: 0;">
                            <input type="checkbox" id="permitir-proposta-servico" style="opacity: 0; width: 0; height: 0;">
                            <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #cbd5e1; transition: 0.3s; border-radius: 26px;"></span>
                        </label>
                        <span style="font-size: 13px; color: #374151;">
                            Permitir que a ordem de serviço seja marcada como uma proposta (ou orçamento)
                        </span>
                    </div>
                </div>

                <!-- Numeração de Ordens de Serviço -->
                <div style="background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                    <h4 style="margin: 0 0 16px 0; font-size: 14px; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-sort-numeric-up" style="color: #3b82f6;"></i> Alterar o número das próximas Ordens de Serviço
                    </h4>
                    <div>
                        <label style="display: block; font-size: 13px; font-weight: 500; color: #374151; margin-bottom: 8px;">
                            Próximo número de Ordem de Serviço
                        </label>
                        <input type="number" 
                               id="proximo-os" 
                               value="1001" 
                               min="1"
                               style="width: 100%; padding: 12px 16px; border: 2px solid #14b8a6; border-radius: 8px; font-size: 14px; outline: none; transition: border-color 0.2s;"
                               onfocus="this.style.borderColor='#0d9488'; this.style.boxShadow='0 0 0 3px rgba(20, 184, 166, 0.1)'"
                               onblur="this.style.borderColor='#14b8a6'; this.style.boxShadow='none'">
                    </div>
                </div>
            </form>
        </div>

        <div class="config-detail-modal-footer" style="display: flex; justify-content: flex-end; gap: 12px; padding: 20px; border-top: 1px solid #e5e7eb; background: #f9fafb;">
            <button type="button" class="config-btn-secondary" onclick="fecharModal('modal-venda-servicos')" style="padding: 10px 20px; border: 1px solid #d1d5db; background: white; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 14px;">
                <i class="fas fa-times"></i> Cancelar
            </button>
            <button type="button" class="config-btn-primary" onclick="saveVendaServicosConfig()" style="padding: 10px 20px; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 14px; font-weight: 500;">
                <i class="fas fa-save"></i> Salvar Configurações
            </button>
        </div>
    </div>
</div>

<!-- Modal: Clientes e Fornecedores - Configurações -->
<div id="modal-clientes-fornecedores-config" class="config-detail-modal">
    <div class="config-detail-card">
        <div class="config-detail-header">
            <div class="config-detail-title">
                <div class="config-detail-icon client">
                    <i class="fas fa-users"></i>
                </div>
                <div class="config-detail-title-text">
                    <h3>Clientes e Fornecedores</h3>
                    <p>Configurações de cadastro e validação</p>
                </div>
            </div>
            <button class="config-detail-close" onclick="closeConfigModal('modal-clientes-fornecedores-config')">×</button>
        </div>

        <div class="config-detail-body">
            <form id="form-clientes-fornecedores" class="config-form">
                <!-- Validações de Cadastro -->
                <div class="config-form-section">
                    <h4 class="config-form-section-title">
                        <i class="fas fa-check-circle"></i> Validações de Cadastro
                    </h4>
                    <div class="config-toggle">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="obrigar-cnpj-cpf" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Obrigar o preenchimento do CNPJ/CPF no cadastro</strong>
                        </div>
                    </div>
                    <div class="config-toggle" style="margin-top: 16px;">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="obrigar-endereco" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Obrigar o preenchimento do Endereço no cadastro</strong>
                        </div>
                    </div>
                    <div class="config-toggle" style="margin-top: 16px;">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="obrigar-email" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Obrigar o preenchimento do E-mail no cadastro</strong>
                        </div>
                    </div>
                </div>

                <!-- Validação de Unicidade -->
                <div class="config-form-section" style="margin-top: 24px;">
                    <h4 class="config-form-section-title">
                        <i class="fas fa-shield-alt"></i> Validação de Unicidade
                    </h4>
                    <div class="config-toggle">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="validar-cnpj-cpf" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Validar unicidade de CNPJ/CPF no cadastro</strong>
                        </div>
                    </div>
                </div>

                <!-- Controle de Crédito -->
                <div class="config-form-section" style="margin-top: 24px;">
                    <h4 class="config-form-section-title">
                        <i class="fas fa-credit-card"></i> Controle de Crédito
                    </h4>
                    <div class="config-toggle">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="bloquear-faturamento">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Bloquear o faturamento para novos clientes</strong>
                        </div>
                    </div>
                    <div class="config-toggle" style="margin-top: 16px;">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="definir-limite-credito">
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Definir um limite de crédito padrão para novos clientes</strong>
                        </div>
                    </div>
                </div>

                <!-- Tags e Características -->
                <div class="config-form-section" style="margin-top: 24px;">
                    <h4 class="config-form-section-title">
                        <i class="fas fa-tags"></i> Tags de Clientes e Fornecedores
                    </h4>
                    <div class="config-toggle">
                        <label class="config-toggle-switch">
                            <input type="checkbox" id="manter-tags-atualizadas" checked>
                            <span class="config-toggle-slider"></span>
                        </label>
                        <div class="config-toggle-label">
                            <strong>Manter os clientes, fornecedores e transportadoras sempre atualizados com uma tag</strong>
                        </div>
                    </div>
                </div>

                <!-- Características Customizadas -->
                <div class="config-form-section" style="margin-top: 24px;">
                    <h4 class="config-form-section-title">
                        <i class="fas fa-sliders-h"></i> Características de Clientes e Fornecedores
                    </h4>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px;">
                        Configure campos personalizados para seus cadastros
                    </p>
                    <button type="button" class="btn btn-sm btn-outline">
                        <i class="fas fa-plus"></i> Adicionar Característica
                    </button>
                </div>
            </form>
        </div>

        <div class="config-detail-footer">
            <div class="config-detail-footer-left"></div>
            <div class="config-detail-footer-right">
                <button class="config-btn config-btn-secondary" onclick="closeConfigModal('modal-clientes-fornecedores-config')">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="config-btn config-btn-primary" onclick="saveClientesFornecedoresConfig()">
                    <i class="fas fa-save"></i> Salvar Configurações
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Configurações de Finanças -->
<div class="config-detail-modal" id="modal-financas">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-financas')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div>
                    <h3>Configurações de Finanças</h3>
                    <p>Configure opções gerais de finanças</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-financas')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Contas em Atraso -->
            <div class="config-form-group">
                <label for="contas-atraso">
                    <i class="fas fa-exclamation-triangle" style="color: #dc3545; margin-right: 8px;"></i>
                    Contas em Atraso
                </label>
                <select id="contas-atraso" class="config-input">
                    <option value="nao-mostrar">Não mostrar</option>
                    <option value="mostrar-aviso">Mostrar aviso</option>
                    <option value="bloquear-vendas">Bloquear vendas</option>
                </select>
                <small class="config-input-help">Defina como tratar clientes com contas em atraso</small>
            </div>

            <!-- Email para Remessa de Cobrança -->
            <div class="config-form-group">
                <label for="email-remessa">
                    <i class="fas fa-envelope" style="color: #17a2b8; margin-right: 8px;"></i>
                    Email para Remessa de Cobrança
                </label>
                <input 
                    type="email" 
                    id="email-remessa" 
                    class="config-input"
                    placeholder="financeiro@aluforce.com.br"
                    value="financeiro@aluforce.com.br"
                />
                <small class="config-input-help">Email que receberá remessas de cobrança bancária</small>
            </div>

            <!-- Configurações de Juros e Multas -->
            <div class="config-form-group">
                <label>
                    <i class="fas fa-percentage" style="color: #ffc107; margin-right: 8px;"></i>
                    Juros e Multas
                </label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <div>
                        <label for="juros-mes" style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Juros ao mês (%)</label>
                        <input 
                            type="number" 
                            id="juros-mes" 
                            class="config-input"
                            placeholder="1.0"
                            step="0.01"
                            min="0"
                            value="1.0"
                        />
                    </div>
                    <div>
                        <label for="multa-atraso" style="font-size: 13px; color: #666; margin-bottom: 5px; display: block;">Multa por atraso (%)</label>
                        <input 
                            type="number" 
                            id="multa-atraso" 
                            class="config-input"
                            placeholder="2.0"
                            step="0.01"
                            min="0"
                            value="2.0"
                        />
                    </div>
                </div>
            </div>
        </div>

        <div class="config-detail-modal-footer">
            <button type="button" class="config-btn-cancel" onclick="fecharModal('modal-financas')">
                Cancelar
            </button>
            <button type="button" class="config-btn-save" onclick="saveFinanceConfig()">
                <i class="fas fa-save"></i> Salvar
            </button>
        </div>
    </div>
</div>

<!-- Modal: Famílias de Produtos -->
<div class="config-detail-modal" id="modal-familias-produtos">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-familias-produtos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);">
                    <i class="fas fa-boxes"></i>
                </div>
                <div>
                    <h3>Famílias de Produtos</h3>
                    <p>Gerencie famílias de produtos</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-familias-produtos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botões de Ação -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormFamilia()">
                    <i class="fas fa-plus"></i> Incluir
                </button>
                <button class="config-btn-secondary" onclick="importarPlanilhaFamilias()">
                    <i class="fas fa-file-excel"></i> Importar Planilha
                </button>
                <button class="config-btn-secondary" style="margin-left: auto;" onclick="loadFamiliasData()" title="Atualizar lista">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>

            <!-- Formulário Novo/Editar Família (oculto inicialmente) -->
            <div id="form-nova-familia" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f5f3ff; border: 2px solid #6c5ce7; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #6c5ce7; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-boxes"></i>
                            <span id="form-familia-titulo">Nova Família</span>
                        </h4>
                        <button type="button" onclick="fecharFormFamilia()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-familia-config">
                        <input type="hidden" id="familia-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #6c5ce7; margin-right: 6px;"></i>Nome da Família *</label>
                                <input type="text" id="familia-nome" class="config-form-input" placeholder="Ex: Perfis de Alumínio" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-barcode" style="color: #6c5ce7; margin-right: 6px;"></i>Código</label>
                                <input type="text" id="familia-codigo" class="config-form-input" placeholder="Ex: FAM001">
                            </div>
                            
                            <div class="config-form-group" style="grid-column: span 2;">
                                <label><i class="fas fa-sticky-note" style="color: #6c5ce7; margin-right: 6px;"></i>Descrição</label>
                                <textarea id="familia-descricao" class="config-form-input" placeholder="Descrição da família..." rows="2" style="resize: vertical;"></textarea>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormFamilia()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarFamiliaConfig()" style="background: linear-gradient(135deg, #6c5ce7, #a29bfe);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info de Agrupamento -->
            <div style="background: #f8f9fa; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #666;">
                <i class="fas fa-info-circle" style="color: #007bff; margin-right: 8px;"></i>
                Arraste uma ou mais colunas aqui para agrupar
            </div>

            <!-- Tabela de Famílias -->
            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="width: 40px;">
                                <input type="checkbox" id="select-all-familias">
                            </th>
                            <th>Nome da Família <i class="fas fa-sort"></i></th>
                            <th>Código da Família <i class="fas fa-sort"></i></th>
                            <th>Inclusão <i class="fas fa-sort"></i></th>
                            <th>Última Alteração <i class="fas fa-sort"></i></th>
                            <th style="width: 150px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="familias-list">
                        <tr>
                            <td colspan="6" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando famílias...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Paginação -->
            <div class="config-pagination">
                <span id="familias-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Importar Planilha Famílias -->
<div id="modal-importar-familias" class="config-detail-modal" style="display: none;">
    <div class="config-detail-modal-content" style="max-width: 500px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-importar-familias')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                    <i class="fas fa-file-excel"></i>
                </div>
                <div>
                    <h3>Importar Planilha</h3>
                    <p>Importe famílias de produtos</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-importar-familias')">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="config-detail-modal-body">
            <div style="text-align: center; padding: 30px;">
                <div style="border: 2px dashed #d1d5db; border-radius: 12px; padding: 40px; background: #f9fafb;">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: #6c5ce7; margin-bottom: 16px;"></i>
                    <p style="margin: 0 0 16px 0; color: #374151;">Arraste o arquivo ou clique para selecionar</p>
                    <input type="file" id="arquivo-familias" accept=".xlsx,.xls,.csv" style="display: none;" onchange="processarArquivoFamilias(this)">
                    <button class="config-btn-primary" onclick="document.getElementById('arquivo-familias').click()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                        <i class="fas fa-folder-open"></i> Selecionar Arquivo
                    </button>
                </div>
                <div style="margin-top: 20px;">
                    <a href="#" onclick="baixarModeloFamilias()" style="color: #6c5ce7; text-decoration: none;">
                        <i class="fas fa-download"></i> Baixar modelo de planilha
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Características de Produtos -->
<div class="config-detail-modal" id="modal-caracteristicas-produtos">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-caracteristicas-produtos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);">
                    <i class="fas fa-tags"></i>
                </div>
                <div>
                    <h3>Características de Produtos</h3>
                    <p>Gerencie características de produtos</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-caracteristicas-produtos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botão de Incluir -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormCaracteristica()">
                    <i class="fas fa-plus"></i> Incluir
                </button>
            </div>

            <!-- Formulário Novo/Editar Característica (oculto inicialmente) -->
            <div id="form-nova-caracteristica" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f5f3ff; border: 2px solid #6c5ce7; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #6c5ce7; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-tags"></i>
                            <span id="form-caracteristica-titulo">Nova Característica</span>
                        </h4>
                        <button type="button" onclick="fecharFormCaracteristica()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-caracteristica-config">
                        <input type="hidden" id="caracteristica-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #6c5ce7; margin-right: 6px;"></i>Nome da Característica *</label>
                                <input type="text" id="caracteristica-nome" class="config-form-input" placeholder="Ex: Cor, Tamanho, Material" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-list" style="color: #6c5ce7; margin-right: 6px;"></i>Tipo de Preenchimento</label>
                                <select id="caracteristica-tipo" class="config-form-input">
                                    <option value="texto">Texto Livre</option>
                                    <option value="lista">Lista de Opções</option>
                                    <option value="numero">Numérico</option>
                                    <option value="sim_nao">Sim/Não</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group" style="grid-column: span 2;">
                                <label><i class="fas fa-list-ol" style="color: #6c5ce7; margin-right: 6px;"></i>Conteúdos Possíveis</label>
                                <input type="text" id="caracteristica-conteudos" class="config-form-input" placeholder="Separe por vírgula: Vermelho, Azul, Verde">
                                <small style="color: #6b7280; font-size: 11px;">Para tipo "Lista de Opções", informe os valores separados por vírgula</small>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-eye" style="color: #6c5ce7; margin-right: 6px;"></i>Visualizar em</label>
                                <select id="caracteristica-visualizar" class="config-form-input">
                                    <option value="todos">Todos os lugares</option>
                                    <option value="cadastro">Apenas no Cadastro</option>
                                    <option value="pedido">Apenas no Pedido</option>
                                    <option value="nenhum">Não exibir</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-check-circle" style="color: #6c5ce7; margin-right: 6px;"></i>Preenchimento</label>
                                <select id="caracteristica-obrigatorio" class="config-form-input">
                                    <option value="opcional">Opcional</option>
                                    <option value="obrigatorio">Obrigatório</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormCaracteristica()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarCaracteristicaConfig()" style="background: linear-gradient(135deg, #6c5ce7, #a29bfe);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info de Agrupamento -->
            <div style="background: #f8f9fa; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #666;">
                <i class="fas fa-info-circle" style="color: #007bff; margin-right: 8px;"></i>
                Arraste uma ou mais colunas aqui para agrupar
            </div>

            <!-- Tabela de Características - Visual Melhorado -->
            <div class="config-table-container" style="border: 1px solid #e5e7eb; border-radius: 10px; overflow: hidden;">
                <table class="config-table" style="margin: 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
                            <th style="padding: 14px 16px; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    Nome da Característica
                                    <i class="fas fa-sort" style="color: #9ca3af; font-size: 10px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 16px; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    Possui Versão
                                    <i class="fas fa-sort" style="color: #9ca3af; font-size: 10px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 16px; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    Última Alteração
                                    <i class="fas fa-sort" style="color: #9ca3af; font-size: 10px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 16px; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 6px;">
                                    Empreenchimento
                                    <i class="fas fa-sort" style="color: #9ca3af; font-size: 10px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 16px; font-weight: 600; color: #374151; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; width: 100px; text-align: center;">
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody id="caracteristicas-list">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 50px 20px; color: #9ca3af;">
                                <i class="fas fa-inbox" style="font-size: 40px; margin-bottom: 12px; display: block; color: #e5e7eb;"></i>
                                <span style="font-size: 14px;">Nenhum registro encontrado</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Vendedores -->
<div class="config-detail-modal" id="modal-vendedores">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-vendedores')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div>
                    <h3>Vendedores</h3>
                    <p>Gerencie vendedores do sistema</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-vendedores')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botão de Incluir -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormVendedor()">
                    <i class="fas fa-plus"></i> Incluir
                </button>
            </div>

            <!-- Formulário Novo/Editar Vendedor (oculto inicialmente) -->
            <div id="form-novo-vendedor" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f0fdf4; border: 2px solid #00b894; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #00b894; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-user-plus"></i>
                            <span id="form-vendedor-titulo">Novo Vendedor</span>
                        </h4>
                        <button type="button" onclick="fecharFormVendedor()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-vendedor-config">
                        <input type="hidden" id="vendedor-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-user" style="color: #00b894; margin-right: 6px;"></i>Nome *</label>
                                <input type="text" id="vendedor-nome" class="config-form-input" placeholder="Nome completo do vendedor" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-envelope" style="color: #00b894; margin-right: 6px;"></i>E-mail *</label>
                                <input type="email" id="vendedor-email" class="config-form-input" placeholder="email@empresa.com" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-percent" style="color: #00b894; margin-right: 6px;"></i>% Comissão</label>
                                <input type="number" id="vendedor-comissao" class="config-form-input" placeholder="0.00" step="0.01" min="0" max="100" value="1.00">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-phone" style="color: #00b894; margin-right: 6px;"></i>Telefone</label>
                                <input type="text" id="vendedor-telefone" class="config-form-input" placeholder="(00) 00000-0000">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-shield-alt" style="color: #00b894; margin-right: 6px;"></i>Permissões</label>
                                <select id="vendedor-permissoes" class="config-form-input">
                                    <option value="vendas">Apenas Vendas</option>
                                    <option value="orcamentos">Orçamentos e Vendas</option>
                                    <option value="completo">Acesso Completo</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-toggle-on" style="color: #00b894; margin-right: 6px;"></i>Situação</label>
                                <select id="vendedor-situacao" class="config-form-input">
                                    <option value="ativo">Ativo</option>
                                    <option value="inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormVendedor()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarVendedorConfig()" style="background: linear-gradient(135deg, #00b894, #55efc4);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info de Agrupamento -->
            <div style="background: #f8f9fa; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #666;">
                <i class="fas fa-info-circle" style="color: #007bff; margin-right: 8px;"></i>
                Arraste uma ou mais colunas aqui para agrupar
            </div>

            <!-- Tabela de Vendedores - Visual Melhorado -->
            <div class="config-table-container" style="border: 1px solid #e5e7eb; border-radius: 10px; overflow: hidden;">
                <table class="config-table" style="margin: 0;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);">
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 90px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Situação <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Nome do Vendedor <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 80px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Comissão <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; min-width: 180px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    E-mail do Vendedor <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; white-space: nowrap; width: 100px;">
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    Inclusão <i class="fas fa-sort" style="color: #9ca3af; font-size: 9px;"></i>
                                </span>
                            </th>
                            <th style="padding: 14px 12px; font-weight: 600; color: #374151; font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #e5e7eb; width: 140px; text-align: center;">
                                Ações
                            </th>
                        </tr>
                    </thead>
                    <tbody id="vendedores-list">
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 50px 20px; color: #9ca3af;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block;"></i>
                                Carregando vendedores...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Paginação -->
            <div class="config-pagination" style="margin-top: 20px;">
                <span id="vendedores-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Compradores -->
<div class="config-detail-modal" id="modal-compradores">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-compradores')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #0984e3 0%, #74b9ff 100%);">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div>
                    <h3>Compradores</h3>
                    <p>Gerencie compradores do sistema</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-compradores')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Botão de Incluir -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormComprador()">
                    <i class="fas fa-plus"></i> Incluir
                </button>
            </div>

            <!-- Formulário Novo/Editar Comprador (oculto inicialmente) -->
            <div id="form-novo-comprador" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f8fafc; border: 2px solid #0984e3; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #0984e3; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-user-plus"></i>
                            <span id="form-comprador-titulo">Novo Comprador</span>
                        </h4>
                        <button type="button" onclick="fecharFormComprador()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-comprador-config">
                        <input type="hidden" id="comprador-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-user" style="color: #0984e3; margin-right: 6px;"></i>Nome *</label>
                                <input type="text" id="comprador-nome" class="config-form-input" placeholder="Nome do comprador" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-envelope" style="color: #0984e3; margin-right: 6px;"></i>E-mail</label>
                                <input type="email" id="comprador-email" class="config-form-input" placeholder="email@empresa.com">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-phone" style="color: #0984e3; margin-right: 6px;"></i>Telefone</label>
                                <input type="text" id="comprador-telefone" class="config-form-input" placeholder="(00) 00000-0000">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-building" style="color: #0984e3; margin-right: 6px;"></i>Departamento</label>
                                <input type="text" id="comprador-departamento" class="config-form-input" placeholder="Ex: Compras, Suprimentos">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-dollar-sign" style="color: #0984e3; margin-right: 6px;"></i>Limite de Aprovação (R$)</label>
                                <input type="text" id="comprador-limite" class="config-form-input" placeholder="0,00" oninput="formatarMoedaConfig(this)">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-toggle-on" style="color: #0984e3; margin-right: 6px;"></i>Situação</label>
                                <select id="comprador-situacao" class="config-form-input">
                                    <option value="ativo">Ativo</option>
                                    <option value="inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="config-form-group" style="margin-top: 16px;">
                            <label><i class="fas fa-sticky-note" style="color: #0984e3; margin-right: 6px;"></i>Observações</label>
                            <textarea id="comprador-observacoes" class="config-form-input" placeholder="Observações adicionais..." rows="2" style="resize: vertical;"></textarea>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormComprador()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarCompradorConfig()" style="background: linear-gradient(135deg, #0984e3, #74b9ff);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info de Agrupamento -->
            <div style="background: #f8f9fa; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px; font-size: 13px; color: #666;">
                <i class="fas fa-info-circle" style="color: #007bff; margin-right: 8px;"></i>
                Arraste uma ou mais colunas aqui para agrupar
            </div>

            <!-- Tabela de Compradores -->
            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="width: 80px;">Situação <i class="fas fa-sort"></i></th>
                            <th>Nome do Comprador <i class="fas fa-sort"></i></th>
                            <th>Inclusão <i class="fas fa-sort"></i></th>
                            <th>Última Alteração <i class="fas fa-sort"></i></th>
                            <th>Incluído por <i class="fas fa-sort"></i></th>
                            <th style="width: 150px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="compradores-list">
                        <tr>
                            <td colspan="6" class="text-center" style="padding: 40px; color: #6c757d;">
                                <i class="fas fa-spinner fa-spin"></i> Carregando compradores...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Paginação -->
            <div class="config-pagination">
                <span id="compradores-info">Carregando...</span>
                <div class="config-pagination-buttons">
                    <button disabled><i class="fas fa-angle-double-left"></i></button>
                    <button disabled><i class="fas fa-angle-left"></i></button>
                    <span>1</span>
                    <button disabled><i class="fas fa-angle-right"></i></button>
                    <button disabled><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal: Plano de Contas -->
<div class="config-detail-modal" id="modal-plano-contas">
    <div class="config-detail-modal-content" style="max-width: 900px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-plano-contas')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <i class="fas fa-list-alt"></i>
                </div>
                <div>
                    <h3>Plano de Contas</h3>
                    <p>Estrutura contábil da empresa</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-plano-contas')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                <button class="config-btn-primary" onclick="abrirFormNovaConta()">
                    <i class="fas fa-plus"></i> Nova Conta
                </button>
                <button class="config-btn-secondary" onclick="expandirTodosConfig()">
                    <i class="fas fa-expand-alt"></i> Expandir Todos
                </button>
                <button class="config-btn-secondary" onclick="recolherTodosConfig()">
                    <i class="fas fa-compress-alt"></i> Recolher Todos
                </button>
            </div>

            <!-- Formulário Nova/Editar Conta (oculto inicialmente) -->
            <div id="form-nova-conta-config" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f8fafc; border: 2px solid #f39c12; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #c27803; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-sitemap"></i>
                            <span id="form-conta-titulo">Nova Conta Contábil</span>
                        </h4>
                        <button type="button" onclick="fecharFormNovaConta()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-conta-config">
                        <input type="hidden" id="conta-config-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #f39c12; margin-right: 6px;"></i>Nome da Conta *</label>
                                <input type="text" id="conta-config-nome" class="config-form-input" placeholder="Ex: Receitas Operacionais" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-exchange-alt" style="color: #f39c12; margin-right: 6px;"></i>Tipo *</label>
                                <select id="conta-config-tipo" class="config-form-input" required onchange="atualizarCorPorTipo()">
                                    <option value="receita">📈 Receita</option>
                                    <option value="despesa">📉 Despesa</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-folder-tree" style="color: #f39c12; margin-right: 6px;"></i>Conta Pai</label>
                                <select id="conta-config-pai" class="config-form-input">
                                    <option value="">Nenhuma (Conta Principal)</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-icons" style="color: #f39c12; margin-right: 6px;"></i>Ícone</label>
                                <select id="conta-config-icone" class="config-form-input">
                                    <option value="fa-folder">📁 Pasta</option>
                                    <option value="fa-money-bill">💵 Dinheiro</option>
                                    <option value="fa-chart-line">📈 Gráfico</option>
                                    <option value="fa-shopping-cart">🛒 Compras</option>
                                    <option value="fa-users">👥 Pessoas</option>
                                    <option value="fa-building">🏢 Empresa</option>
                                    <option value="fa-bolt">⚡ Energia</option>
                                    <option value="fa-truck">🚚 Transporte</option>
                                    <option value="fa-tools">🔧 Manutenção</option>
                                    <option value="fa-home">🏠 Casa</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="config-form-group" style="margin-bottom: 16px;">
                            <label><i class="fas fa-swatchbook" style="color: #f39c12; margin-right: 6px;"></i>Cor de Identificação</label>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap; padding: 12px; background: #fff; border-radius: 8px; border: 1px solid #e5e7eb;">
                                <div class="config-color-option selected" data-color="#22c55e" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #22c55e; border: 3px solid transparent;" title="Verde"></div>
                                <div class="config-color-option" data-color="#ef4444" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #ef4444; border: 3px solid transparent;" title="Vermelho"></div>
                                <div class="config-color-option" data-color="#3b82f6" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #3b82f6; border: 3px solid transparent;" title="Azul"></div>
                                <div class="config-color-option" data-color="#f59e0b" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #f59e0b; border: 3px solid transparent;" title="Laranja"></div>
                                <div class="config-color-option" data-color="#8b5cf6" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #8b5cf6; border: 3px solid transparent;" title="Roxo"></div>
                                <div class="config-color-option" data-color="#ec4899" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #ec4899; border: 3px solid transparent;" title="Rosa"></div>
                                <div class="config-color-option" data-color="#14b8a6" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #14b8a6; border: 3px solid transparent;" title="Teal"></div>
                                <div class="config-color-option" data-color="#64748b" style="width: 32px; height: 32px; border-radius: 8px; cursor: pointer; background: #64748b; border: 3px solid transparent;" title="Cinza"></div>
                            </div>
                        </div>
                        
                        <div class="config-form-group">
                            <label><i class="fas fa-align-left" style="color: #f39c12; margin-right: 6px;"></i>Descrição</label>
                            <textarea id="conta-config-descricao" class="config-form-input" placeholder="Descrição opcional da conta..." rows="2" style="resize: vertical;"></textarea>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormNovaConta()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarContaConfig()" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                                <i class="fas fa-save"></i> Salvar Conta
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Árvore de Contas -->
            <div class="config-tree-view" id="plano-contas-tree-config">
                <div style="text-align: center; padding: 40px; color: #6b7280;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block; color: #f39c12;"></i>
                    Carregando plano de contas...
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Contas Bancárias -->
<div class="config-detail-modal" id="modal-contas-bancarias">
    <div class="config-detail-modal-content" style="max-width: 1000px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-contas-bancarias')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <i class="fas fa-university"></i>
                </div>
                <div>
                    <h3>Contas Bancárias</h3>
                    <p>Gestão de contas e conciliação</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-contas-bancarias')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormContaBancaria()">
                    <i class="fas fa-plus"></i> Nova Conta
                </button>
                <button class="config-btn-secondary" onclick="abrirImportOFX()">
                    <i class="fas fa-file-import"></i> Importar OFX
                </button>
            </div>

            <!-- Formulário Nova Conta (oculto inicialmente) -->
            <div id="form-nova-conta-bancaria" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f8fafc; border: 2px solid #3b82f6; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #1e40af; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-plus-circle"></i>
                            <span id="form-conta-titulo">Nova Conta Bancária</span>
                        </h4>
                        <button type="button" onclick="fecharFormContaBancaria()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-conta-bancaria-config">
                        <input type="hidden" id="conta-bancaria-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-university" style="color: #f39c12; margin-right: 6px;"></i>Banco *</label>
                                <select id="conta-banco-codigo" class="config-form-input" required>
                                    <option value="">Selecione o banco...</option>
                                    <optgroup label="Bancos Tradicionais">
                                        <option value="001">001 - Banco do Brasil</option>
                                        <option value="237">237 - Bradesco</option>
                                        <option value="341">341 - Itaú Unibanco</option>
                                        <option value="033">033 - Santander</option>
                                        <option value="104">104 - Caixa Econômica</option>
                                    </optgroup>
                                    <optgroup label="Bancos Digitais">
                                        <option value="260">260 - Nubank</option>
                                        <option value="077">077 - Banco Inter</option>
                                        <option value="336">336 - C6 Bank</option>
                                        <option value="290">290 - PagSeguro</option>
                                        <option value="380">380 - PicPay</option>
                                    </optgroup>
                                    <optgroup label="Cooperativas">
                                        <option value="756">756 - Sicoob</option>
                                        <option value="748">748 - Sicredi</option>
                                    </optgroup>
                                    <optgroup label="Outros">
                                        <option value="000">Caixa Interno</option>
                                    </optgroup>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-credit-card" style="color: #f39c12; margin-right: 6px;"></i>Tipo de Conta *</label>
                                <select id="conta-tipo" class="config-form-input" required>
                                    <option value="corrente">Conta Corrente</option>
                                    <option value="poupanca">Poupança</option>
                                    <option value="investimento">Investimento</option>
                                    <option value="pagamentos">Conta de Pagamentos</option>
                                    <option value="caixa">Caixa Interno</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-hashtag" style="color: #f39c12; margin-right: 6px;"></i>Agência</label>
                                <input type="text" id="conta-agencia" class="config-form-input" placeholder="0000" maxlength="10">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-hashtag" style="color: #f39c12; margin-right: 6px;"></i>Número da Conta</label>
                                <input type="text" id="conta-numero" class="config-form-input" placeholder="00000-0" maxlength="20">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #f39c12; margin-right: 6px;"></i>Apelido / Nome</label>
                                <input type="text" id="conta-apelido" class="config-form-input" placeholder="Ex: Conta Principal, Fornecedores...">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-dollar-sign" style="color: #f39c12; margin-right: 6px;"></i>Saldo Inicial</label>
                                <input type="text" id="conta-saldo" class="config-form-input" placeholder="0,00" oninput="formatarMoedaConfig(this)">
                            </div>
                        </div>
                        
                        <div class="config-form-group" style="margin-top: 16px;">
                            <label><i class="fas fa-sticky-note" style="color: #f39c12; margin-right: 6px;"></i>Observações</label>
                            <textarea id="conta-observacoes" class="config-form-input" rows="2" placeholder="Anotações sobre esta conta..."></textarea>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormContaBancaria()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarContaBancariaConfig()">
                                <i class="fas fa-save"></i> Salvar Conta
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="width: 80px;">Status</th>
                            <th>Banco</th>
                            <th>Agência</th>
                            <th>Conta</th>
                            <th>Tipo</th>
                            <th>Saldo Atual</th>
                            <th>Última Conciliação</th>
                            <th style="width: 120px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="contas-bancarias-list">
                        <tr>
                            <td colspan="8" class="text-center" style="padding: 40px; color: #6b7280;">
                                <i class="fas fa-inbox" style="font-size: 32px; margin-bottom: 12px; display: block; color: #cbd5e1;"></i>
                                Nenhuma conta cadastrada
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 600; color: #495057;">Saldo Total:</span>
                    <span id="saldo-total-bancario" style="font-size: 1.25rem; font-weight: 700; color: #28a745;">R$ 0,00</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Importar OFX -->
<div class="config-detail-modal" id="modal-importar-ofx">
    <div class="config-detail-modal-content" style="max-width: 600px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-importar-ofx')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                    <i class="fas fa-file-import"></i>
                </div>
                <div>
                    <h3>Importar OFX</h3>
                    <p>Importar extrato bancário</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-importar-ofx')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div style="text-align: center; padding: 40px 20px;">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                    <i class="fas fa-file-upload" style="font-size: 32px; color: white;"></i>
                </div>
                
                <h4 style="margin-bottom: 8px; color: #1f2937;">Selecione o arquivo OFX</h4>
                <p style="color: #6b7280; margin-bottom: 24px;">Arquivos OFX são extratos bancários exportados do seu banco</p>
                
                <div class="config-form-group" style="margin-bottom: 20px;">
                    <label><i class="fas fa-university" style="color: #10b981; margin-right: 6px;"></i>Conta de Destino *</label>
                    <select id="ofx-conta-destino" class="config-form-input" required>
                        <option value="">Selecione a conta...</option>
                    </select>
                </div>
                
                <div id="ofx-dropzone" style="border: 2px dashed #10b981; border-radius: 12px; padding: 40px; cursor: pointer; transition: all 0.2s; background: #f0fdf4;" 
                     onclick="document.getElementById('ofx-file-input').click()"
                     ondragover="event.preventDefault(); this.style.background='#dcfce7';"
                     ondragleave="this.style.background='#f0fdf4';"
                     ondrop="handleOFXDrop(event)">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: #10b981; margin-bottom: 12px;"></i>
                    <p style="margin: 0; color: #059669; font-weight: 500;">Arraste o arquivo aqui ou clique para selecionar</p>
                    <p style="margin: 8px 0 0 0; font-size: 12px; color: #6b7280;">Formatos aceitos: .ofx, .qfx</p>
                </div>
                
                <input type="file" id="ofx-file-input" accept=".ofx,.qfx" style="display: none;" onchange="handleOFXFile(this.files[0])">
                
                <div id="ofx-file-info" style="display: none; margin-top: 20px; padding: 16px; background: #f8fafc; border-radius: 8px; text-align: left;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <i class="fas fa-file-alt" style="font-size: 24px; color: #10b981;"></i>
                        <div style="flex: 1;">
                            <div id="ofx-filename" style="font-weight: 600; color: #1f2937;"></div>
                            <div id="ofx-filesize" style="font-size: 12px; color: #6b7280;"></div>
                        </div>
                        <button onclick="limparOFX()" style="background: none; border: none; cursor: pointer; color: #ef4444;">
                            <i class="fas fa-times-circle" style="font-size: 20px;"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 12px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                <button type="button" class="config-btn-secondary" onclick="fecharModal('modal-importar-ofx')">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button type="button" class="config-btn-primary" onclick="processarOFX()" style="background: linear-gradient(135deg, #10b981, #059669);">
                    <i class="fas fa-upload"></i> Importar Extrato
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Formas de Pagamento -->
<div class="config-detail-modal" id="modal-formas-pagamento">
    <div class="config-detail-modal-content">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-formas-pagamento')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <i class="fas fa-credit-card"></i>
                </div>
                <div>
                    <h3>Formas de Pagamento</h3>
                    <p>Configurar métodos de pagamento</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-formas-pagamento')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="config-btn-primary" onclick="abrirFormFormaPagamento()">
                    <i class="fas fa-plus"></i> Nova Forma
                </button>
            </div>

            <!-- Formulário Nova/Editar Forma de Pagamento (oculto inicialmente) -->
            <div id="form-nova-forma-pagamento" style="display: none; margin-bottom: 20px;">
                <div class="config-form-card" style="background: #f8fafc; border: 2px solid #f39c12; border-radius: 12px; padding: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h4 style="margin: 0; color: #c27803; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-plus-circle"></i>
                            <span id="form-forma-titulo">Nova Forma de Pagamento</span>
                        </h4>
                        <button type="button" onclick="fecharFormFormaPagamento()" style="background: none; border: none; cursor: pointer; font-size: 18px; color: #64748b;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="form-forma-pagamento-config">
                        <input type="hidden" id="forma-pagamento-id">
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div class="config-form-group">
                                <label><i class="fas fa-tag" style="color: #f39c12; margin-right: 6px;"></i>Nome *</label>
                                <input type="text" id="forma-nome" class="config-form-input" placeholder="Ex: Cartão de Crédito" required>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-list" style="color: #f39c12; margin-right: 6px;"></i>Tipo *</label>
                                <select id="forma-tipo" class="config-form-input" required>
                                    <option value="a_vista">À Vista</option>
                                    <option value="a_prazo">A Prazo</option>
                                    <option value="parcelado">Parcelado</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-calendar-alt" style="color: #f39c12; margin-right: 6px;"></i>Prazo (dias)</label>
                                <input type="number" id="forma-prazo" class="config-form-input" placeholder="0" min="0" value="0">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-percent" style="color: #f39c12; margin-right: 6px;"></i>Taxa (%)</label>
                                <input type="text" id="forma-taxa" class="config-form-input" placeholder="0,00" oninput="formatarTaxaConfig(this)">
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-palette" style="color: #f39c12; margin-right: 6px;"></i>Ícone</label>
                                <select id="forma-icone" class="config-form-input">
                                    <option value="fa-money-bill-wave">💵 Dinheiro</option>
                                    <option value="fa-credit-card">💳 Cartão</option>
                                    <option value="fa-qrcode">📱 PIX</option>
                                    <option value="fa-barcode">📊 Boleto</option>
                                    <option value="fa-exchange-alt">🔄 Transferência</option>
                                    <option value="fa-file-invoice-dollar">📄 Cheque</option>
                                    <option value="fa-hand-holding-usd">🤝 Crediário</option>
                                </select>
                            </div>
                            
                            <div class="config-form-group">
                                <label><i class="fas fa-toggle-on" style="color: #f39c12; margin-right: 6px;"></i>Status</label>
                                <select id="forma-status" class="config-form-input">
                                    <option value="ativo">Ativo</option>
                                    <option value="inativo">Inativo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
                            <button type="button" class="config-btn-secondary" onclick="fecharFormFormaPagamento()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                            <button type="button" class="config-btn-primary" onclick="salvarFormaPagamentoConfig()" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                                <i class="fas fa-save"></i> Salvar
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="config-table-container">
                <table class="config-table">
                    <thead>
                        <tr>
                            <th style="width: 80px;">Status</th>
                            <th>Forma de Pagamento</th>
                            <th>Tipo</th>
                            <th>Prazo (dias)</th>
                            <th>Taxa (%)</th>
                            <th style="width: 100px;">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="formas-pagamento-list">
                        <tr>
                            <td colspan="6" class="text-center" style="padding: 40px; color: #6b7280;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; margin-bottom: 12px; display: block; color: #f39c12;"></i>
                                Carregando formas de pagamento...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Configuração de Impostos -->
<div class="config-detail-modal" id="modal-impostos">
    <div class="config-detail-modal-content" style="max-width: 900px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-impostos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);">
                    <i class="fas fa-percent"></i>
                </div>
                <div>
                    <h3>Configuração de Impostos</h3>
                    <p>Alíquotas e regimes tributários</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-impostos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Aviso de Integração -->
            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-left: 4px solid #2196f3; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-info-circle" style="color: #1976d2; font-size: 18px;"></i>
                <span style="color: #1565c0; font-size: 13px;">As configurações salvas aqui serão aplicadas automaticamente em todos os módulos: Vendas, Compras, NF-e, Financeiro e Relatórios.</span>
            </div>

            <!-- Regime Tributário -->
            <div class="config-form-group">
                <label><i class="fas fa-building" style="color: #0984e3; margin-right: 8px;"></i>Regime Tributário</label>
                <select id="impostos-regime-tributario" class="config-input">
                    <option value="simples">Simples Nacional</option>
                    <option value="lucro-presumido">Lucro Presumido</option>
                    <option value="lucro-real">Lucro Real</option>
                    <option value="mei">MEI</option>
                </select>
            </div>

            <!-- Alíquotas de Impostos -->
            <h4 style="margin-top: 25px; margin-bottom: 15px; color: #2d3748; font-size: 15px;">
                <i class="fas fa-percentage" style="color: #f39c12; margin-right: 8px;"></i>Alíquotas de Impostos
            </h4>

            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                <div class="config-form-group">
                    <label>ICMS (%)</label>
                    <input type="number" id="impostos-icms" class="config-input" value="18" step="0.01" min="0" max="100">
                </div>
                <div class="config-form-group">
                    <label>IPI (%)</label>
                    <input type="number" id="impostos-ipi" class="config-input" value="5" step="0.01" min="0" max="100">
                </div>
                <div class="config-form-group">
                    <label>PIS (%)</label>
                    <input type="number" id="impostos-pis" class="config-input" value="1.65" step="0.01" min="0" max="100">
                </div>
                <div class="config-form-group">
                    <label>COFINS (%)</label>
                    <input type="number" id="impostos-cofins" class="config-input" value="7.6" step="0.01" min="0" max="100">
                </div>
                <div class="config-form-group">
                    <label>ISS (%)</label>
                    <input type="number" id="impostos-iss" class="config-input" value="5" step="0.01" min="0" max="100">
                </div>
                <div class="config-form-group">
                    <label>IRPJ (%)</label>
                    <input type="number" id="impostos-irpj" class="config-input" value="15" step="0.01" min="0" max="100">
                </div>
            </div>

            <!-- CFOP Padrão -->
            <h4 style="margin-top: 25px; margin-bottom: 15px; color: #2d3748; font-size: 15px;">
                <i class="fas fa-code" style="color: #6c5ce7; margin-right: 8px;"></i>CFOP Padrão
            </h4>

            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                <div class="config-form-group">
                    <label>Venda Dentro do Estado</label>
                    <input type="text" id="impostos-cfop-venda-interna" class="config-input" value="5102" placeholder="Ex: 5102" maxlength="5">
                </div>
                <div class="config-form-group">
                    <label>Venda Fora do Estado</label>
                    <input type="text" id="impostos-cfop-venda-externa" class="config-input" value="6102" placeholder="Ex: 6102" maxlength="5">
                </div>
                <div class="config-form-group">
                    <label>Devolução Dentro do Estado</label>
                    <input type="text" id="impostos-cfop-devolucao-interna" class="config-input" value="5202" placeholder="Ex: 5202" maxlength="5">
                </div>
                <div class="config-form-group">
                    <label>Devolução Fora do Estado</label>
                    <input type="text" id="impostos-cfop-devolucao-externa" class="config-input" value="6202" placeholder="Ex: 6202" maxlength="5">
                </div>
            </div>

            <div class="config-detail-modal-footer" style="margin-top: 25px;">
                <button type="button" class="config-btn-cancel" onclick="fecharModal('modal-impostos')">Cancelar</button>
                <button type="button" class="config-btn-save" onclick="saveImpostosConfig()">
                    <i class="fas fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Sobre os Lançamentos - Enterprise v4 -->
<div class="config-detail-modal" id="modal-sobre-lancamentos">
    <div class="config-detail-modal-content" style="max-width: 720px;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-sobre-lancamentos')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-blue">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div>
                    <h3>Sobre os Lançamentos</h3>
                    <p>Atualizações, melhorias e roadmap</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-sobre-lancamentos')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body">
            <!-- Versão Atual - Enterprise Card -->
            <div class="lancamentos-version-card">
                <div class="lancamentos-version-left">
                    <div class="lancamentos-version-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <div>
                        <h4 class="lancamentos-version-name">Aluforce ERP</h4>
                        <p class="lancamentos-version-desc">Sistema de Gestão Empresarial</p>
                    </div>
                </div>
                <div class="lancamentos-version-right">
                    <span class="lancamentos-version-number">v11.12</span>
                    <span class="lancamentos-version-tag">Beta</span>
                </div>
            </div>

            <!-- Atualizações Recentes -->
            <div class="lancamentos-section">
                <h4 class="lancamentos-section-title">
                    <span class="lancamentos-section-icon success"><i class="fas fa-check-circle"></i></span>
                    Atualizações Recentes
                </h4>

                <div class="lancamentos-timeline">
                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot done"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge done"><i class="fas fa-check"></i> Concluído</div>
                            <h5>Módulo PCP — Interface Padronizada</h5>
                            <p>Sidebar e header ajustados para o padrão ALUFORCE</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> 31/12/2025</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot done"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge done"><i class="fas fa-check"></i> Concluído</div>
                            <h5>Financeiro — Modais Profissionais</h5>
                            <p>Contas a Pagar e Receber com novo design</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> 30/12/2025</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot done"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge done"><i class="fas fa-check"></i> Concluído</div>
                            <h5>Sistema de Suporte — Pop-up de Confirmação</h5>
                            <p>Modal estilizado para fechar tickets</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> 31/12/2025</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot done"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge done"><i class="fas fa-check"></i> Concluído</div>
                            <h5>PCP — Geração de Ordem em Excel</h5>
                            <p>Melhoria no preenchimento automático do template</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> 29/12/2025</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Próximas Atualizações -->
            <div class="lancamentos-section">
                <h4 class="lancamentos-section-title">
                    <span class="lancamentos-section-icon warning"><i class="fas fa-rocket"></i></span>
                    Próximas Atualizações
                </h4>

                <div class="lancamentos-timeline">
                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot progress"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge progress"><i class="fas fa-spinner fa-spin"></i> Em Desenvolvimento</div>
                            <h5>Módulo de Logística</h5>
                            <p>Gestão de entregas, rastreamento e rotas</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> Q1 2026</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot planned"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge planned"><i class="fas fa-clock"></i> Planejado</div>
                            <h5>App Mobile</h5>
                            <p>Aplicativo para iOS e Android</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> Q2 2026</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot planned"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge planned"><i class="fas fa-clock"></i> Planejado</div>
                            <h5>BI Avançado com IA</h5>
                            <p>Dashboards preditivos e análise inteligente</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> Q3 2026</span>
                        </div>
                    </div>

                    <div class="lancamentos-timeline-item">
                        <div class="lancamentos-timeline-dot planned"></div>
                        <div class="lancamentos-timeline-content">
                            <div class="lancamentos-badge planned"><i class="fas fa-clock"></i> Planejado</div>
                            <h5>Integração Bancária Open Finance</h5>
                            <p>Conexão direta com bancos via API</p>
                            <span class="lancamentos-date"><i class="fas fa-calendar-alt"></i> Q4 2026</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sugestões -->
            <div class="lancamentos-suggestion-card">
                <i class="fas fa-lightbulb"></i>
                <p>Tem uma sugestão? Entre em contato pelo chat de suporte ou envie para <strong>ti@aluforce.ind.br</strong></p>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Histórico de Alterações -->
<div class="config-detail-modal" id="modal-historico-alteracoes">
    <div class="config-detail-modal-content" style="max-width: 1000px; max-height: 90vh;">
        <div class="config-detail-modal-header">
            <div class="config-detail-modal-header-left">
                <button class="config-detail-modal-back" onclick="fecharModal('modal-historico-alteracoes')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="config-detail-modal-icon config-icon-purple">
                    <i class="fas fa-history"></i>
                </div>
                <div>
                    <h3>Histórico de Alterações</h3>
                    <p>Registro completo de atividades do sistema</p>
                </div>
            </div>
            <button class="config-detail-modal-close" onclick="fecharModal('modal-historico-alteracoes')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="config-detail-modal-body" style="padding: 0;">
            <!-- Filtros Enterprise -->
            <div class="historico-filters-bar">
                <div class="historico-filter-group">
                    <select id="filtro-modulo" class="historico-filter-select" onchange="filtrarHistorico()">
                        <option value="">Todos os Módulos</option>
                        <option value="vendas">Vendas</option>
                        <option value="compras">Compras</option>
                        <option value="pcp">PCP</option>
                        <option value="financeiro">Financeiro</option>
                        <option value="rh">RH</option>
                        <option value="nfe">NF-e</option>
                        <option value="sistema">Sistema</option>
                    </select>
                </div>
                <div class="historico-filter-group">
                    <select id="filtro-usuario" class="historico-filter-select" onchange="filtrarHistorico()">
                        <option value="">Todos os Colaboradores</option>
                    </select>
                </div>
                <div class="historico-filter-group">
                    <select id="filtro-acao" class="historico-filter-select" onchange="filtrarHistorico()">
                        <option value="">Todas as Ações</option>
                        <option value="criar">Criar</option>
                        <option value="editar">Editar</option>
                        <option value="excluir">Excluir</option>
                        <option value="login">Login</option>
                        <option value="config">Configuração</option>
                    </select>
                </div>
                <div class="historico-filter-group">
                    <input type="date" id="filtro-data-inicio" class="historico-filter-input" placeholder="Data início">
                </div>
                <div class="historico-filter-group">
                    <input type="date" id="filtro-data-fim" class="historico-filter-input" placeholder="Data fim">
                </div>
                <button class="historico-btn-export" onclick="exportarHistorico()">
                    <i class="fas fa-download"></i> Exportar
                </button>
            </div>

            <!-- Lista de Histórico -->
            <div class="historico-list-container" id="historico-container">
                <!-- Loading state -->
                <div class="historico-loading" id="historico-loading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Carregando histórico...</p>
                </div>

                <!-- Empty state -->
                <div class="historico-empty" id="historico-empty" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <h5>Nenhum registro encontrado</h5>
                    <p>Tente ajustar os filtros para encontrar registros</p>
                </div>

                <!-- Itens do histórico (exemplo estático, substituídos dinamicamente) -->
                <div class="historico-item">
                    <div class="historico-avatar avatar-blue">AE</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Antonio Egidio</span>
                            <span class="historico-badge badge-editar"><i class="fas fa-edit"></i> Editou</span>
                            <span class="historico-modulo">Vendas</span>
                        </div>
                        <p class="historico-descricao">Alterou o pedido <strong>#12345</strong> — Status: Em Produção → Faturado</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 14:35</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.105</span>
                        </div>
                    </div>
                </div>

                <div class="historico-item">
                    <div class="historico-avatar avatar-red">AD</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Administrador</span>
                            <span class="historico-badge badge-config"><i class="fas fa-cog"></i> Configurou</span>
                            <span class="historico-modulo">Sistema</span>
                        </div>
                        <p class="historico-descricao">Alterou permissões do usuário <strong>Maria Silva</strong> — Adicionou acesso ao módulo Financeiro</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 13:20</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.100</span>
                        </div>
                    </div>
                </div>

                <div class="historico-item">
                    <div class="historico-avatar avatar-green">MS</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Maria Silva</span>
                            <span class="historico-badge badge-criar"><i class="fas fa-plus"></i> Criou</span>
                            <span class="historico-modulo">Compras</span>
                        </div>
                        <p class="historico-descricao">Criou novo pedido de compra <strong>#PC-2025-0456</strong> — Fornecedor: Materiais ABC</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 11:45</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.102</span>
                        </div>
                    </div>
                </div>

                <div class="historico-item">
                    <div class="historico-avatar avatar-orange">AE</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Antonio Egidio</span>
                            <span class="historico-badge badge-perfil"><i class="fas fa-user"></i> Perfil</span>
                            <span class="historico-modulo">Sistema</span>
                        </div>
                        <p class="historico-descricao">Alterou foto do perfil</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 10:30</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.105</span>
                        </div>
                    </div>
                </div>

                <div class="historico-item">
                    <div class="historico-avatar avatar-purple">AD</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Administrador</span>
                            <span class="historico-badge badge-excluir"><i class="fas fa-trash"></i> Excluiu</span>
                            <span class="historico-modulo">PCP</span>
                        </div>
                        <p class="historico-descricao">Excluiu ordem de produção <strong>#OP-2025-0123</strong> — Motivo: Cancelada pelo cliente</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 09:15</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.100</span>
                        </div>
                    </div>
                </div>

                <div class="historico-item">
                    <div class="historico-avatar avatar-teal">MS</div>
                    <div class="historico-content">
                        <div class="historico-header">
                            <span class="historico-usuario">Maria Silva</span>
                            <span class="historico-badge badge-login"><i class="fas fa-sign-in-alt"></i> Login</span>
                            <span class="historico-modulo">Sistema</span>
                        </div>
                        <p class="historico-descricao">Realizou login no sistema</p>
                        <div class="historico-detalhes">
                            <span class="historico-time"><i class="fas fa-clock"></i> 23/12/2025 08:00</span>
                            <span class="historico-ip"><i class="fas fa-globe"></i> 192.168.1.102</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Paginação Enterprise -->
            <div class="historico-pagination-bar" id="historico-pagination">
                <span class="historico-pagination-info">Mostrando 1-6 de 248 registros</span>
                <div class="historico-pagination-buttons">
                    <button class="historico-page-btn" disabled><i class="fas fa-angle-double-left"></i></button>
                    <button class="historico-page-btn" disabled><i class="fas fa-angle-left"></i></button>
                    <button class="historico-page-btn active">1</button>
                    <button class="historico-page-btn">2</button>
                    <button class="historico-page-btn">3</button>
                    <button class="historico-page-btn dots">...</button>
                    <button class="historico-page-btn">42</button>
                    <button class="historico-page-btn"><i class="fas fa-angle-right"></i></button>
                    <button class="historico-page-btn"><i class="fas fa-angle-double-right"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>    <!-- Mobile Enterprise Design System -->
    <link rel="stylesheet" href="/css/design-system-mobile.css?v=20260202">
    <link rel="stylesheet" href="/css/responsive-global.css?v=20260202">
    <link rel="stylesheet" href="/css/mobile-master-2026.css?v=20260202">
    <link rel="stylesheet" href="/css/mobile-enterprise-enhancements.css?v=20260202">


<style>
/* Estilos do Tree View para Plano de Contas */
.config-tree-view {
    border: 1px solid #e9ecef;
    border-radius: 8px;
    overflow: hidden;
}

.tree-item {
    border-bottom: 1px solid #f0f0f0;
}

.tree-item:last-child {
    border-bottom: none;
}

.tree-item-header {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    cursor: pointer;
    transition: background 0.2s;
}

.tree-item-header:hover {
    background: #f8f9fa;
}

.tree-toggle {
    width: 20px;
    margin-right: 8px;
    color: #6c757d;
    transition: transform 0.2s;
}

.tree-toggle.expanded {
    transform: rotate(90deg);
}

.tree-icon {
    margin-right: 10px;
    font-size: 16px;
}

.tree-label {
    flex: 1;
    font-size: 14px;
    color: #2d3748;
}

.tree-actions {
    display: flex;
    gap: 5px;
    opacity: 0;
    transition: opacity 0.2s;
}

.tree-item-header:hover .tree-actions {
    opacity: 1;
}

.tree-actions button {
    width: 28px;
    height: 28px;
    border: none;
    background: #e9ecef;
    border-radius: 6px;
    cursor: pointer;
    color: #495057;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tree-actions button:hover {
    background: #dee2e6;
}

.tree-children {
    padding-left: 35px;
    background: #fafafa;
}

.tree-children .tree-item-header {
    padding-left: 10px;
}

/* Estilos do Roadmap */
.roadmap-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.roadmap-item {
    display: flex;
    gap: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 10px;
    border: 1px solid #e9ecef;
}

.roadmap-status {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 6px;
}

.roadmap-status.status-planned {
    background: #fff3cd;
    color: #856404;
}

.roadmap-status.status-in-progress {
    background: #cce5ff;
    color: #004085;
}

.roadmap-content h5 {
    margin: 0 0 5px;
    font-size: 15px;
    color: #2d3748;
}

.roadmap-content p {
    margin: 0 0 8px;
    font-size: 13px;
    color: #6c757d;
}

.roadmap-date {
    font-size: 12px;
    color: #adb5bd;
    font-weight: 500;
}

/* Estilos do Histórico */
.historico-item {
    display: flex;
    gap: 15px;
    padding: 15px;
    border-bottom: 1px solid #f0f0f0;
    transition: background 0.2s;
}

.historico-item:hover {
    background: #f8f9fa;
}

.historico-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 14px;
    flex-shrink: 0;
}

.historico-content {
    flex: 1;
}

.historico-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
    flex-wrap: wrap;
}

.historico-usuario {
    font-weight: 600;
    color: #2d3748;
}

.historico-badge {
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

.badge-criar { background: #d4edda; color: #155724; }
.badge-editar { background: #cce5ff; color: #004085; }
.badge-excluir { background: #f8d7da; color: #721c24; }
.badge-login { background: #d1ecf1; color: #0c5460; }
.badge-config { background: #e2e3e5; color: #383d41; }
.badge-perfil { background: #fff3cd; color: #856404; }

.historico-modulo {
    padding: 2px 8px;
    background: #e9ecef;
    border-radius: 4px;
    font-size: 11px;
    color: #495057;
}

.historico-descricao {
    margin: 0 0 8px;
    font-size: 14px;
    color: #495057;
    line-height: 1.5;
}

.historico-detalhes {
    display: flex;
    gap: 20px;
    font-size: 12px;
    color: #adb5bd;
}

.historico-detalhes i {
    margin-right: 5px;
}

/* Status badges para funcionários */
.status-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.status-ativo {
    background: #d4edda;
    color: #155724;
}

.status-inativo {
    background: #f8d7da;
    color: #721c24;
}

.status-ferias {
    background: #cce5ff;
    color: #004085;
}

.status-afastado {
    background: #fff3cd;
    color: #856404;
}

/* Config form section styling */
.config-form-section {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e9ecef;
}

.config-form-section:last-of-type {
    border-bottom: none;
    margin-bottom: 0;
}

.config-section-title {
    font-size: 16px;
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.config-section-title i {
    color: #3498db;
}

.config-form-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

@media (max-width: 768px) {
    .config-form-grid {
        grid-template-columns: 1fr;
    }
}

.config-form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #e9ecef;
}

/* Toast animation */
@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Config button icon active state */
.config-btn-icon.active {
    background: #3498db !important;
    color: white !important;
}

/* Config btn link */
.config-btn-link {
    background: none;
    border: none;
    color: #3498db;
    cursor: pointer;
    font-size: 14px;
}

.config-btn-link:hover {
    text-decoration: underline;
}

/* Danger button for delete actions */
.config-btn-icon.danger:hover {
    background: #f8d7da;
    color: #721c24;
}

/* Badge info */
.badge-info {
    background: #d1ecf1;
    color: #0c5460;
}
</style>