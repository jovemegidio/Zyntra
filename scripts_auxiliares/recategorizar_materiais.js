// Script para recategorizar materiais com base na descri√ß√£orequire('dotenv').config();const mysql = require('mysql2/promise');async function recategorizarMateriais() {    const conn = await mysql.createConnection({        host: process.env.DB_HOST,        port: process.env.DB_PORT || 3306,        user: process.env.DB_USER,        password: process.env.DB_PASSWORD,        database: process.env.DB_NAME,        charset: 'utf8mb4'    });    try {        await conn.query('SET NAMES utf8mb4');        console.log('üîß Recategorizando materiais...');                // Regras de categoriza√ß√£o baseadas na descri√ß√£o        const regras = [            { pattern: '%VEIA%', categoria: 'Veias e Cabos' },            { pattern: '%MULTIPLEX%', categoria: 'Veias e Cabos' },            { pattern: '%CABO DE POTENCIA%', categoria: 'Cabos de Pot√™ncia' },            { pattern: '%CB DE POTENCIA%', categoria: 'Cabos de Pot√™ncia' },            { pattern: '%CABO%', categoria: 'Cabos e Fios' },            { pattern: '%POLIETILENO%', categoria: 'Polietileno' },            { pattern: '%CORDA%', categoria: 'Cordas' },            { pattern: '%FILAMENTO%', categoria: 'Filamentos' },            { pattern: '%PVC%', categoria: 'PVC' },            { pattern: '%PERFIL%', categoria: 'Perfis' },            { pattern: '%CHAPA%', categoria: 'Chapas' },            { pattern: '%TUBO%', categoria: 'Tubos' },            { pattern: '%PARAFUSO%', categoria: 'Fixa√ß√£o' },            { pattern: '%PORCA%', categoria: 'Fixa√ß√£o' },            { pattern: '%ARRUELA%', categoria: 'Fixa√ß√£o' },            { pattern: '%REBITE%', categoria: 'Fixa√ß√£o' },            { pattern: '%BUCHA%', categoria: 'Fixa√ß√£o' },            { pattern: '%BORRACHA%', categoria: 'Borrachas' },            { pattern: '%VEDA√á√çO%', categoria: 'Borrachas' },            { pattern: '%GAXETA%', categoria: 'Borrachas' },            { pattern: '%SILICONE%', categoria: 'Adesivos' },            { pattern: '%COLA%', categoria: 'Adesivos' },            { pattern: '%FITA%', categoria: 'Embalagens' },            { pattern: '%FILME%', categoria: 'Embalagens' },            { pattern: '%CAIXA%', categoria: 'Embalagens' },            { pattern: '%TINTA%', categoria: 'Pintura' },            { pattern: '%PRIMER%', categoria: 'Pintura' },            { pattern: '%VERNIZ%', categoria: 'Pintura' },            { pattern: '%LIXA%', categoria: 'Ferramentas' },            { pattern: '%DISCO%', categoria: 'Ferramentas' },            { pattern: '%BROCA%', categoria: 'Ferramentas' },            { pattern: '%SERRA%', categoria: 'Ferramentas' },            { pattern: '%GRAXA%', categoria: 'Lubrificantes' },            { pattern: '%√ìLEO%', categoria: 'Lubrificantes' },            { pattern: '%VIDRO%', categoria: 'Vidros' },            { pattern: '%DOBRADI√áA%', categoria: 'Componentes' },            { pattern: '%FECHADURA%', categoria: 'Componentes' },            { pattern: '%PUXADOR%', categoria: 'Componentes' },            { pattern: '%ROLDANA%', categoria: 'Componentes' },            { pattern: '%TRINCO%', categoria: 'Componentes' },            { pattern: '%ALUM√çNIO%', categoria: 'Mat√©ria Prima' },        ];        for (const regra of regras) {            const [result] = await conn.query(                `UPDATE compras_materiais                  SET categoria = ?                  WHERE UPPER(descricao) LIKE UPPER(?)                  AND (categoria = 'Geral' OR categoria = 'Pl√°sticos' OR categoria = 'Cabos e Fios')`,                [regra.categoria, regra.pattern]            );            if (result.affectedRows > 0) {                console.log(`‚úÖ ${regra.categoria}: ${result.affectedRows} materiais atualizados`);            }        }        // Verificar resultado        const [cats] = await conn.query('SELECT categoria, COUNT(*) as qtd FROM compras_materiais GROUP BY categoria ORDER BY qtd DESC');        console.log('üìä Categorias ap√≥s recategoriza√ß√£o:');        cats.forEach(c => console.log(`  - ${c.categoria}: ${c.qtd}`));        console.log('‚úÖ Recategoriza√ß√£o conclu√≠da!');    } catch (error) {        console.error('‚ùå Erro:', error.message);    } finally {        await conn.end();    }}recategorizarMateriais();